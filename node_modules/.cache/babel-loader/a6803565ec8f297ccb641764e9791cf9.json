{"ast":null,"code":"import _get from \"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _toConsumableArray from \"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _defineProperty from \"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _assertThisInitialized from \"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _wrapNativeSuper from \"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js\";\nimport _classCallCheck from \"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _createForOfIteratorHelper from \"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"C:\\\\DaoWebsite\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(xn);\n\nvar gt = Object.create;\nvar U = Object.defineProperty,\n    Rt = Object.defineProperties,\n    Tt = Object.getOwnPropertyDescriptor,\n    vt = Object.getOwnPropertyDescriptors,\n    xt = Object.getOwnPropertyNames,\n    $e = Object.getOwnPropertySymbols,\n    It = Object.getPrototypeOf,\n    be = Object.prototype.hasOwnProperty,\n    Pt = Object.prototype.propertyIsEnumerable;\n\nvar Me = function Me(t, e, n) {\n  return e in t ? U(t, e, {\n    enumerable: !0,\n    configurable: !0,\n    writable: !0,\n    value: n\n  }) : t[e] = n;\n},\n    Ne = function Ne(t, e) {\n  for (var n in e || (e = {})) {\n    be.call(e, n) && Me(t, n, e[n]);\n  }\n\n  if ($e) {\n    var _iterator = _createForOfIteratorHelper($e(e)),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var n = _step.value;\n        Pt.call(e, n) && Me(t, n, e[n]);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n\n  return t;\n},\n    we = function we(t, e) {\n  return Rt(t, vt(e));\n},\n    $t = function $t(t) {\n  return U(t, \"__esModule\", {\n    value: !0\n  });\n};\n\nvar bt = function bt(t, e) {\n  return function () {\n    return e || t((e = {\n      exports: {}\n    }).exports, e), e.exports;\n  };\n},\n    Mt = function Mt(t, e) {\n  for (var n in e) {\n    U(t, n, {\n      get: e[n],\n      enumerable: !0\n    });\n  }\n},\n    Nt = function Nt(t, e, n, r) {\n  if (e && typeof e == \"object\" || typeof e == \"function\") {\n    var _iterator2 = _createForOfIteratorHelper(xt(e)),\n        _step2;\n\n    try {\n      var _loop = function _loop() {\n        var s = _step2.value;\n        !be.call(t, s) && (n || s !== \"default\") && U(t, s, {\n          get: function get() {\n            return e[s];\n          },\n          enumerable: !(r = Tt(e, s)) || r.enumerable\n        });\n      };\n\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        _loop();\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return t;\n},\n    wt = function wt(t, e) {\n  return Nt($t(U(t != null ? gt(It(t)) : {}, \"default\", !e && t && t.__esModule ? {\n    get: function get() {\n      return t.default;\n    },\n    enumerable: !0\n  } : {\n    value: t,\n    enumerable: !0\n  })), t);\n};\n\nvar I = function I(t, e, n) {\n  return new Promise(function (r, s) {\n    var o = function o(c) {\n      try {\n        i(n.next(c));\n      } catch (p) {\n        s(p);\n      }\n    },\n        a = function a(c) {\n      try {\n        i(n.throw(c));\n      } catch (p) {\n        s(p);\n      }\n    },\n        i = function i(c) {\n      return c.done ? r(c.value) : Promise.resolve(c.value).then(o, a);\n    };\n\n    i((n = n.apply(t, e)).next());\n  });\n};\n\nvar nt = bt(function (fr, he) {\n  \"use strict\";\n\n  var $n = Object.prototype.hasOwnProperty,\n      T = \"~\";\n\n  function B() {}\n\n  Object.create && (B.prototype = Object.create(null), new B().__proto__ || (T = !1));\n\n  function bn(t, e, n) {\n    this.fn = t, this.context = e, this.once = n || !1;\n  }\n\n  function tt(t, e, n, r, s) {\n    if (typeof n != \"function\") throw new TypeError(\"The listener must be a function\");\n    var o = new bn(n, r || t, s),\n        a = T ? T + e : e;\n    return t._events[a] ? t._events[a].fn ? t._events[a] = [t._events[a], o] : t._events[a].push(o) : (t._events[a] = o, t._eventsCount++), t;\n  }\n\n  function se(t, e) {\n    --t._eventsCount === 0 ? t._events = new B() : delete t._events[e];\n  }\n\n  function g() {\n    this._events = new B(), this._eventsCount = 0;\n  }\n\n  g.prototype.eventNames = function () {\n    var e = [],\n        n,\n        r;\n    if (this._eventsCount === 0) return e;\n\n    for (r in n = this._events) {\n      $n.call(n, r) && e.push(T ? r.slice(1) : r);\n    }\n\n    return Object.getOwnPropertySymbols ? e.concat(Object.getOwnPropertySymbols(n)) : e;\n  };\n\n  g.prototype.listeners = function (e) {\n    var n = T ? T + e : e,\n        r = this._events[n];\n    if (!r) return [];\n    if (r.fn) return [r.fn];\n\n    for (var s = 0, o = r.length, a = new Array(o); s < o; s++) {\n      a[s] = r[s].fn;\n    }\n\n    return a;\n  };\n\n  g.prototype.listenerCount = function (e) {\n    var n = T ? T + e : e,\n        r = this._events[n];\n    return r ? r.fn ? 1 : r.length : 0;\n  };\n\n  g.prototype.emit = function (e, n, r, s, o, a) {\n    var i = T ? T + e : e;\n    if (!this._events[i]) return !1;\n    var c = this._events[i],\n        p = arguments.length,\n        l,\n        u;\n\n    if (c.fn) {\n      switch (c.once && this.removeListener(e, c.fn, void 0, !0), p) {\n        case 1:\n          return c.fn.call(c.context), !0;\n\n        case 2:\n          return c.fn.call(c.context, n), !0;\n\n        case 3:\n          return c.fn.call(c.context, n, r), !0;\n\n        case 4:\n          return c.fn.call(c.context, n, r, s), !0;\n\n        case 5:\n          return c.fn.call(c.context, n, r, s, o), !0;\n\n        case 6:\n          return c.fn.call(c.context, n, r, s, o, a), !0;\n      }\n\n      for (u = 1, l = new Array(p - 1); u < p; u++) {\n        l[u - 1] = arguments[u];\n      }\n\n      c.fn.apply(c.context, l);\n    } else {\n      var v = c.length,\n          M;\n\n      for (u = 0; u < v; u++) {\n        switch (c[u].once && this.removeListener(e, c[u].fn, void 0, !0), p) {\n          case 1:\n            c[u].fn.call(c[u].context);\n            break;\n\n          case 2:\n            c[u].fn.call(c[u].context, n);\n            break;\n\n          case 3:\n            c[u].fn.call(c[u].context, n, r);\n            break;\n\n          case 4:\n            c[u].fn.call(c[u].context, n, r, s);\n            break;\n\n          default:\n            if (!l) for (M = 1, l = new Array(p - 1); M < p; M++) {\n              l[M - 1] = arguments[M];\n            }\n            c[u].fn.apply(c[u].context, l);\n        }\n      }\n    }\n\n    return !0;\n  };\n\n  g.prototype.on = function (e, n, r) {\n    return tt(this, e, n, r, !1);\n  };\n\n  g.prototype.once = function (e, n, r) {\n    return tt(this, e, n, r, !0);\n  };\n\n  g.prototype.removeListener = function (e, n, r, s) {\n    var o = T ? T + e : e;\n    if (!this._events[o]) return this;\n    if (!n) return se(this, o), this;\n    var a = this._events[o];\n    if (a.fn) a.fn === n && (!s || a.once) && (!r || a.context === r) && se(this, o);else {\n      for (var i = 0, c = [], p = a.length; i < p; i++) {\n        (a[i].fn !== n || s && !a[i].once || r && a[i].context !== r) && c.push(a[i]);\n      }\n\n      c.length ? this._events[o] = c.length === 1 ? c[0] : c : se(this, o);\n    }\n    return this;\n  };\n\n  g.prototype.removeAllListeners = function (e) {\n    var n;\n    return e ? (n = T ? T + e : e, this._events[n] && se(this, n)) : (this._events = new B(), this._eventsCount = 0), this;\n  };\n\n  g.prototype.off = g.prototype.removeListener;\n  g.prototype.addListener = g.prototype.on;\n  g.prefixed = T;\n  g.EventEmitter = g;\n  typeof he != \"undefined\" && (he.exports = g);\n});\n\nfunction At(t) {\n  var e = {\n    exports: {}\n  };\n  return t(e, e.exports), e.exports;\n}\n\nvar Lt = Number.MAX_SAFE_INTEGER || 9007199254740991;\n\nvar de = {\n  SEMVER_SPEC_VERSION: \"2.0.0\",\n  MAX_LENGTH: 256,\n  MAX_SAFE_INTEGER: Lt,\n  MAX_SAFE_COMPONENT_LENGTH: 16\n},\n    St = typeof process == \"object\" && process.env && process.env.NODE_DEBUG && /\\bsemver\\b/i.test(process.env.NODE_DEBUG) ? function () {\n  var _console;\n\n  for (var _len = arguments.length, t = new Array(_len), _key = 0; _key < _len; _key++) {\n    t[_key] = arguments[_key];\n  }\n\n  return (_console = console).error.apply(_console, [\"SEMVER\"].concat(t));\n} : function () {},\n    d = St,\n    K = At(function (t, e) {\n  var n = de.MAX_SAFE_COMPONENT_LENGTH,\n      r = (e = t.exports = {}).re = [],\n      s = e.src = [],\n      o = e.t = {},\n      a = 0,\n      i = function i(c, p, l) {\n    var u = a++;\n    d(u, p), o[c] = u, s[u] = p, r[u] = new RegExp(p, l ? \"g\" : void 0);\n  };\n\n  i(\"NUMERICIDENTIFIER\", \"0|[1-9]\\\\d*\"), i(\"NUMERICIDENTIFIERLOOSE\", \"[0-9]+\"), i(\"NONNUMERICIDENTIFIER\", \"\\\\d*[a-zA-Z-][a-zA-Z0-9-]*\"), i(\"MAINVERSION\", \"(\".concat(s[o.NUMERICIDENTIFIER], \")\\\\.(\").concat(s[o.NUMERICIDENTIFIER], \")\\\\.(\").concat(s[o.NUMERICIDENTIFIER], \")\")), i(\"MAINVERSIONLOOSE\", \"(\".concat(s[o.NUMERICIDENTIFIERLOOSE], \")\\\\.(\").concat(s[o.NUMERICIDENTIFIERLOOSE], \")\\\\.(\").concat(s[o.NUMERICIDENTIFIERLOOSE], \")\")), i(\"PRERELEASEIDENTIFIER\", \"(?:\".concat(s[o.NUMERICIDENTIFIER], \"|\").concat(s[o.NONNUMERICIDENTIFIER], \")\")), i(\"PRERELEASEIDENTIFIERLOOSE\", \"(?:\".concat(s[o.NUMERICIDENTIFIERLOOSE], \"|\").concat(s[o.NONNUMERICIDENTIFIER], \")\")), i(\"PRERELEASE\", \"(?:-(\".concat(s[o.PRERELEASEIDENTIFIER], \"(?:\\\\.\").concat(s[o.PRERELEASEIDENTIFIER], \")*))\")), i(\"PRERELEASELOOSE\", \"(?:-?(\".concat(s[o.PRERELEASEIDENTIFIERLOOSE], \"(?:\\\\.\").concat(s[o.PRERELEASEIDENTIFIERLOOSE], \")*))\")), i(\"BUILDIDENTIFIER\", \"[0-9A-Za-z-]+\"), i(\"BUILD\", \"(?:\\\\+(\".concat(s[o.BUILDIDENTIFIER], \"(?:\\\\.\").concat(s[o.BUILDIDENTIFIER], \")*))\")), i(\"FULLPLAIN\", \"v?\".concat(s[o.MAINVERSION]).concat(s[o.PRERELEASE], \"?\").concat(s[o.BUILD], \"?\")), i(\"FULL\", \"^\".concat(s[o.FULLPLAIN], \"$\")), i(\"LOOSEPLAIN\", \"[v=\\\\s]*\".concat(s[o.MAINVERSIONLOOSE]).concat(s[o.PRERELEASELOOSE], \"?\").concat(s[o.BUILD], \"?\")), i(\"LOOSE\", \"^\".concat(s[o.LOOSEPLAIN], \"$\")), i(\"GTLT\", \"((?:<|>)?=?)\"), i(\"XRANGEIDENTIFIERLOOSE\", \"\".concat(s[o.NUMERICIDENTIFIERLOOSE], \"|x|X|\\\\*\")), i(\"XRANGEIDENTIFIER\", \"\".concat(s[o.NUMERICIDENTIFIER], \"|x|X|\\\\*\")), i(\"XRANGEPLAIN\", \"[v=\\\\s]*(\".concat(s[o.XRANGEIDENTIFIER], \")(?:\\\\.(\").concat(s[o.XRANGEIDENTIFIER], \")(?:\\\\.(\").concat(s[o.XRANGEIDENTIFIER], \")(?:\").concat(s[o.PRERELEASE], \")?\").concat(s[o.BUILD], \"?)?)?\")), i(\"XRANGEPLAINLOOSE\", \"[v=\\\\s]*(\".concat(s[o.XRANGEIDENTIFIERLOOSE], \")(?:\\\\.(\").concat(s[o.XRANGEIDENTIFIERLOOSE], \")(?:\\\\.(\").concat(s[o.XRANGEIDENTIFIERLOOSE], \")(?:\").concat(s[o.PRERELEASELOOSE], \")?\").concat(s[o.BUILD], \"?)?)?\")), i(\"XRANGE\", \"^\".concat(s[o.GTLT], \"\\\\s*\").concat(s[o.XRANGEPLAIN], \"$\")), i(\"XRANGELOOSE\", \"^\".concat(s[o.GTLT], \"\\\\s*\").concat(s[o.XRANGEPLAINLOOSE], \"$\")), i(\"COERCE\", \"(^|[^\\\\d])(\\\\d{1,\".concat(n, \"})(?:\\\\.(\\\\d{1,\").concat(n, \"}))?(?:\\\\.(\\\\d{1,\").concat(n, \"}))?(?:$|[^\\\\d])\")), i(\"COERCERTL\", s[o.COERCE], !0), i(\"LONETILDE\", \"(?:~>?)\"), i(\"TILDETRIM\", \"(\\\\s*)\".concat(s[o.LONETILDE], \"\\\\s+\"), !0), e.tildeTrimReplace = \"$1~\", i(\"TILDE\", \"^\".concat(s[o.LONETILDE]).concat(s[o.XRANGEPLAIN], \"$\")), i(\"TILDELOOSE\", \"^\".concat(s[o.LONETILDE]).concat(s[o.XRANGEPLAINLOOSE], \"$\")), i(\"LONECARET\", \"(?:\\\\^)\"), i(\"CARETTRIM\", \"(\\\\s*)\".concat(s[o.LONECARET], \"\\\\s+\"), !0), e.caretTrimReplace = \"$1^\", i(\"CARET\", \"^\".concat(s[o.LONECARET]).concat(s[o.XRANGEPLAIN], \"$\")), i(\"CARETLOOSE\", \"^\".concat(s[o.LONECARET]).concat(s[o.XRANGEPLAINLOOSE], \"$\")), i(\"COMPARATORLOOSE\", \"^\".concat(s[o.GTLT], \"\\\\s*(\").concat(s[o.LOOSEPLAIN], \")$|^$\")), i(\"COMPARATOR\", \"^\".concat(s[o.GTLT], \"\\\\s*(\").concat(s[o.FULLPLAIN], \")$|^$\")), i(\"COMPARATORTRIM\", \"(\\\\s*)\".concat(s[o.GTLT], \"\\\\s*(\").concat(s[o.LOOSEPLAIN], \"|\").concat(s[o.XRANGEPLAIN], \")\"), !0), e.comparatorTrimReplace = \"$1$2$3\", i(\"HYPHENRANGE\", \"^\\\\s*(\".concat(s[o.XRANGEPLAIN], \")\\\\s+-\\\\s+(\").concat(s[o.XRANGEPLAIN], \")\\\\s*$\")), i(\"HYPHENRANGELOOSE\", \"^\\\\s*(\".concat(s[o.XRANGEPLAINLOOSE], \")\\\\s+-\\\\s+(\").concat(s[o.XRANGEPLAINLOOSE], \")\\\\s*$\")), i(\"STAR\", \"(<|>)?=?\\\\s*\\\\*\"), i(\"GTE0\", \"^\\\\s*>=\\\\s*0.0.0\\\\s*$\"), i(\"GTE0PRE\", \"^\\\\s*>=\\\\s*0.0.0-0\\\\s*$\");\n}),\n    Ae = /^[0-9]+$/,\n    Le = function Le(t, e) {\n  var n = Ae.test(t),\n      r = Ae.test(e);\n  return n && r && (t = +t, e = +e), t === e ? 0 : n && !r ? -1 : r && !n ? 1 : t < e ? -1 : 1;\n},\n    Ot = function Ot(t, e) {\n  return Le(e, t);\n},\n    Ct = {\n  compareIdentifiers: Le,\n  rcompareIdentifiers: Ot\n},\n    Se = de.MAX_LENGTH,\n    z = de.MAX_SAFE_INTEGER,\n    Oe = K.re,\n    Ce = K.t,\n    j = Ct.compareIdentifiers,\n    E = /*#__PURE__*/function () {\n  function E(e, n) {\n    _classCallCheck(this, E);\n\n    if (n && typeof n == \"object\" || (n = {\n      loose: !!n,\n      includePrerelease: !1\n    }), e instanceof E) {\n      if (e.loose === !!n.loose && e.includePrerelease === !!n.includePrerelease) return e;\n      e = e.version;\n    } else if (typeof e != \"string\") throw new TypeError(\"Invalid Version: \".concat(e));\n\n    if (e.length > Se) throw new TypeError(\"version is longer than \".concat(Se, \" characters\"));\n    d(\"SemVer\", e, n), this.options = n, this.loose = !!n.loose, this.includePrerelease = !!n.includePrerelease;\n    var r = e.trim().match(n.loose ? Oe[Ce.LOOSE] : Oe[Ce.FULL]);\n    if (!r) throw new TypeError(\"Invalid Version: \".concat(e));\n    if (this.raw = e, this.major = +r[1], this.minor = +r[2], this.patch = +r[3], this.major > z || this.major < 0) throw new TypeError(\"Invalid major version\");\n    if (this.minor > z || this.minor < 0) throw new TypeError(\"Invalid minor version\");\n    if (this.patch > z || this.patch < 0) throw new TypeError(\"Invalid patch version\");\n    r[4] ? this.prerelease = r[4].split(\".\").map(function (s) {\n      if (/^[0-9]+$/.test(s)) {\n        var o = +s;\n        if (o >= 0 && o < z) return o;\n      }\n\n      return s;\n    }) : this.prerelease = [], this.build = r[5] ? r[5].split(\".\") : [], this.format();\n  }\n\n  _createClass(E, [{\n    key: \"format\",\n    value: function format() {\n      return this.version = \"\".concat(this.major, \".\").concat(this.minor, \".\").concat(this.patch), this.prerelease.length && (this.version += \"-\".concat(this.prerelease.join(\".\"))), this.version;\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.version;\n    }\n  }, {\n    key: \"compare\",\n    value: function compare(e) {\n      if (d(\"SemVer.compare\", this.version, this.options, e), !(e instanceof E)) {\n        if (typeof e == \"string\" && e === this.version) return 0;\n        e = new E(e, this.options);\n      }\n\n      return e.version === this.version ? 0 : this.compareMain(e) || this.comparePre(e);\n    }\n  }, {\n    key: \"compareMain\",\n    value: function compareMain(e) {\n      return e instanceof E || (e = new E(e, this.options)), j(this.major, e.major) || j(this.minor, e.minor) || j(this.patch, e.patch);\n    }\n  }, {\n    key: \"comparePre\",\n    value: function comparePre(e) {\n      if (e instanceof E || (e = new E(e, this.options)), this.prerelease.length && !e.prerelease.length) return -1;\n      if (!this.prerelease.length && e.prerelease.length) return 1;\n      if (!this.prerelease.length && !e.prerelease.length) return 0;\n      var n = 0;\n\n      do {\n        var r = this.prerelease[n],\n            s = e.prerelease[n];\n        if (d(\"prerelease compare\", n, r, s), r === void 0 && s === void 0) return 0;\n        if (s === void 0) return 1;\n        if (r === void 0) return -1;\n        if (r !== s) return j(r, s);\n      } while (++n);\n    }\n  }, {\n    key: \"compareBuild\",\n    value: function compareBuild(e) {\n      e instanceof E || (e = new E(e, this.options));\n      var n = 0;\n\n      do {\n        var r = this.build[n],\n            s = e.build[n];\n        if (d(\"prerelease compare\", n, r, s), r === void 0 && s === void 0) return 0;\n        if (s === void 0) return 1;\n        if (r === void 0) return -1;\n        if (r !== s) return j(r, s);\n      } while (++n);\n    }\n  }, {\n    key: \"inc\",\n    value: function inc(e, n) {\n      switch (e) {\n        case \"premajor\":\n          this.prerelease.length = 0, this.patch = 0, this.minor = 0, this.major++, this.inc(\"pre\", n);\n          break;\n\n        case \"preminor\":\n          this.prerelease.length = 0, this.patch = 0, this.minor++, this.inc(\"pre\", n);\n          break;\n\n        case \"prepatch\":\n          this.prerelease.length = 0, this.inc(\"patch\", n), this.inc(\"pre\", n);\n          break;\n\n        case \"prerelease\":\n          this.prerelease.length === 0 && this.inc(\"patch\", n), this.inc(\"pre\", n);\n          break;\n\n        case \"major\":\n          this.minor === 0 && this.patch === 0 && this.prerelease.length !== 0 || this.major++, this.minor = 0, this.patch = 0, this.prerelease = [];\n          break;\n\n        case \"minor\":\n          this.patch === 0 && this.prerelease.length !== 0 || this.minor++, this.patch = 0, this.prerelease = [];\n          break;\n\n        case \"patch\":\n          this.prerelease.length === 0 && this.patch++, this.prerelease = [];\n          break;\n\n        case \"pre\":\n          if (this.prerelease.length === 0) this.prerelease = [0];else {\n            var r = this.prerelease.length;\n\n            for (; --r >= 0;) {\n              typeof this.prerelease[r] == \"number\" && (this.prerelease[r]++, r = -2);\n            }\n\n            r === -1 && this.prerelease.push(0);\n          }\n          n && (this.prerelease[0] === n ? isNaN(this.prerelease[1]) && (this.prerelease = [n, 0]) : this.prerelease = [n, 0]);\n          break;\n\n        default:\n          throw new Error(\"invalid increment argument: \".concat(e));\n      }\n\n      return this.format(), this.raw = this.version, this;\n    }\n  }]);\n\n  return E;\n}(),\n    _t = function _t(t, e, n) {\n  return new E(t, n).compare(new E(e, n));\n},\n    k = _t,\n    Dt = function Dt(t, e, n) {\n  return k(t, e, n) === 0;\n},\n    kt = Dt,\n    Jt = function Jt(t, e, n) {\n  return k(t, e, n) !== 0;\n},\n    qt = Jt,\n    Gt = function Gt(t, e, n) {\n  return k(t, e, n) > 0;\n},\n    Ut = Gt,\n    Kt = function Kt(t, e, n) {\n  return k(t, e, n) >= 0;\n},\n    jt = Kt,\n    Ft = function Ft(t, e, n) {\n  return k(t, e, n) < 0;\n},\n    Wt = Ft,\n    Xt = function Xt(t, e, n) {\n  return k(t, e, n) <= 0;\n},\n    Bt = Xt,\n    Ht = function Ht(t, e, n, r) {\n  switch (e) {\n    case \"===\":\n      return typeof t == \"object\" && (t = t.version), typeof n == \"object\" && (n = n.version), t === n;\n\n    case \"!==\":\n      return typeof t == \"object\" && (t = t.version), typeof n == \"object\" && (n = n.version), t !== n;\n\n    case \"\":\n    case \"=\":\n    case \"==\":\n      return kt(t, n, r);\n\n    case \"!=\":\n      return qt(t, n, r);\n\n    case \">\":\n      return Ut(t, n, r);\n\n    case \">=\":\n      return jt(t, n, r);\n\n    case \"<\":\n      return Wt(t, n, r);\n\n    case \"<=\":\n      return Bt(t, n, r);\n\n    default:\n      throw new TypeError(\"Invalid operator: \".concat(e));\n  }\n},\n    me = Ht,\n    F = Symbol(\"SemVer ANY\"),\n    O = /*#__PURE__*/function () {\n  function O(e, n) {\n    _classCallCheck(this, O);\n\n    if (n && typeof n == \"object\" || (n = {\n      loose: !!n,\n      includePrerelease: !1\n    }), e instanceof O) {\n      if (e.loose === !!n.loose) return e;\n      e = e.value;\n    }\n\n    d(\"comparator\", e, n), this.options = n, this.loose = !!n.loose, this.parse(e), this.semver === F ? this.value = \"\" : this.value = this.operator + this.semver.version, d(\"comp\", this);\n  }\n\n  _createClass(O, [{\n    key: \"parse\",\n    value: function parse(e) {\n      var n = this.options.loose ? _e[De.COMPARATORLOOSE] : _e[De.COMPARATOR],\n          r = e.match(n);\n      if (!r) throw new TypeError(\"Invalid comparator: \".concat(e));\n      this.operator = r[1] !== void 0 ? r[1] : \"\", this.operator === \"=\" && (this.operator = \"\"), r[2] ? this.semver = new E(r[2], this.options.loose) : this.semver = F;\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.value;\n    }\n  }, {\n    key: \"test\",\n    value: function test(e) {\n      if (d(\"Comparator.test\", e, this.options.loose), this.semver === F || e === F) return !0;\n      if (typeof e == \"string\") try {\n        e = new E(e, this.options);\n      } catch (n) {\n        return !1;\n      }\n      return me(e, this.operator, this.semver, this.options);\n    }\n  }, {\n    key: \"intersects\",\n    value: function intersects(e, n) {\n      if (!(e instanceof O)) throw new TypeError(\"a Comparator is required\");\n      if (n && typeof n == \"object\" || (n = {\n        loose: !!n,\n        includePrerelease: !1\n      }), this.operator === \"\") return this.value === \"\" || new N(e.value, n).test(this.value);\n      if (e.operator === \"\") return e.value === \"\" || new N(this.value, n).test(e.semver);\n      var r = !(this.operator !== \">=\" && this.operator !== \">\" || e.operator !== \">=\" && e.operator !== \">\"),\n          s = !(this.operator !== \"<=\" && this.operator !== \"<\" || e.operator !== \"<=\" && e.operator !== \"<\"),\n          o = this.semver.version === e.semver.version,\n          a = !(this.operator !== \">=\" && this.operator !== \"<=\" || e.operator !== \">=\" && e.operator !== \"<=\"),\n          i = me(this.semver, \"<\", e.semver, n) && (this.operator === \">=\" || this.operator === \">\") && (e.operator === \"<=\" || e.operator === \"<\"),\n          c = me(this.semver, \">\", e.semver, n) && (this.operator === \"<=\" || this.operator === \"<\") && (e.operator === \">=\" || e.operator === \">\");\n      return r || s || o && a || i || c;\n    }\n  }], [{\n    key: \"ANY\",\n    get: function get() {\n      return F;\n    }\n  }]);\n\n  return O;\n}(),\n    _e = K.re,\n    De = K.t,\n    N = /*#__PURE__*/function () {\n  function N(e, n) {\n    var _this = this;\n\n    _classCallCheck(this, N);\n\n    if (n && typeof n == \"object\" || (n = {\n      loose: !!n,\n      includePrerelease: !1\n    }), e instanceof N) return e.loose === !!n.loose && e.includePrerelease === !!n.includePrerelease ? e : new N(e.raw, n);\n    if (e instanceof O) return this.raw = e.value, this.set = [[e]], this.format(), this;\n    if (this.options = n, this.loose = !!n.loose, this.includePrerelease = !!n.includePrerelease, this.raw = e, this.set = e.split(/\\s*\\|\\|\\s*/).map(function (r) {\n      return _this.parseRange(r.trim());\n    }).filter(function (r) {\n      return r.length;\n    }), !this.set.length) throw new TypeError(\"Invalid SemVer Range: \".concat(e));\n    this.format();\n  }\n\n  _createClass(N, [{\n    key: \"format\",\n    value: function format() {\n      return this.range = this.set.map(function (e) {\n        return e.join(\" \").trim();\n      }).join(\"||\").trim(), this.range;\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.range;\n    }\n  }, {\n    key: \"parseRange\",\n    value: function parseRange(e) {\n      var _this2 = this;\n\n      var n = this.options.loose;\n      e = e.trim();\n      var r = n ? y[f.HYPHENRANGELOOSE] : y[f.HYPHENRANGE];\n      e = e.replace(r, cn(this.options.includePrerelease)), d(\"hyphen replace\", e), e = e.replace(y[f.COMPARATORTRIM], Vt), d(\"comparator trim\", e, y[f.COMPARATORTRIM]), e = (e = (e = e.replace(y[f.TILDETRIM], zt)).replace(y[f.CARETTRIM], Yt)).split(/\\s+/).join(\" \");\n      var s = n ? y[f.COMPARATORLOOSE] : y[f.COMPARATOR];\n      return e.split(\" \").map(function (o) {\n        return Zt(o, _this2.options);\n      }).join(\" \").split(/\\s+/).map(function (o) {\n        return an(o, _this2.options);\n      }).filter(this.options.loose ? function (o) {\n        return !!o.match(s);\n      } : function () {\n        return !0;\n      }).map(function (o) {\n        return new O(o, _this2.options);\n      });\n    }\n  }, {\n    key: \"intersects\",\n    value: function intersects(e, n) {\n      if (!(e instanceof N)) throw new TypeError(\"a Range is required\");\n      return this.set.some(function (r) {\n        return ke(r, n) && e.set.some(function (s) {\n          return ke(s, n) && r.every(function (o) {\n            return s.every(function (a) {\n              return o.intersects(a, n);\n            });\n          });\n        });\n      });\n    }\n  }, {\n    key: \"test\",\n    value: function test(e) {\n      if (!e) return !1;\n      if (typeof e == \"string\") try {\n        e = new E(e, this.options);\n      } catch (n) {\n        return !1;\n      }\n\n      for (var n = 0; n < this.set.length; n++) {\n        if (ln(this.set[n], e, this.options)) return !0;\n      }\n\n      return !1;\n    }\n  }]);\n\n  return N;\n}(),\n    y = K.re,\n    f = K.t,\n    Vt = K.comparatorTrimReplace,\n    zt = K.tildeTrimReplace,\n    Yt = K.caretTrimReplace,\n    ke = function ke(t, e) {\n  var n = !0,\n      r = t.slice(),\n      s = r.pop();\n\n  for (; n && r.length;) {\n    n = r.every(function (o) {\n      return s.intersects(o, e);\n    }), s = r.pop();\n  }\n\n  return n;\n},\n    Zt = function Zt(t, e) {\n  return d(\"comp\", t, e), t = tn(t, e), d(\"caret\", t), t = Qt(t, e), d(\"tildes\", t), t = rn(t, e), d(\"xrange\", t), t = on(t, e), d(\"stars\", t), t;\n},\n    R = function R(t) {\n  return !t || t.toLowerCase() === \"x\" || t === \"*\";\n},\n    Qt = function Qt(t, e) {\n  return t.trim().split(/\\s+/).map(function (n) {\n    return en(n, e);\n  }).join(\" \");\n},\n    en = function en(t, e) {\n  var n = e.loose ? y[f.TILDELOOSE] : y[f.TILDE];\n  return t.replace(n, function (r, s, o, a, i) {\n    var c;\n    return d(\"tilde\", t, r, s, o, a, i), R(s) ? c = \"\" : R(o) ? c = \">=\".concat(s, \".0.0 <\").concat(+s + 1, \".0.0-0\") : R(a) ? c = \">=\".concat(s, \".\").concat(o, \".0 <\").concat(s, \".\").concat(+o + 1, \".0-0\") : i ? (d(\"replaceTilde pr\", i), c = \">=\".concat(s, \".\").concat(o, \".\").concat(a, \"-\").concat(i, \" <\").concat(s, \".\").concat(+o + 1, \".0-0\")) : c = \">=\".concat(s, \".\").concat(o, \".\").concat(a, \" <\").concat(s, \".\").concat(+o + 1, \".0-0\"), d(\"tilde return\", c), c;\n  });\n},\n    tn = function tn(t, e) {\n  return t.trim().split(/\\s+/).map(function (n) {\n    return nn(n, e);\n  }).join(\" \");\n},\n    nn = function nn(t, e) {\n  d(\"caret\", t, e);\n  var n = e.loose ? y[f.CARETLOOSE] : y[f.CARET],\n      r = e.includePrerelease ? \"-0\" : \"\";\n  return t.replace(n, function (s, o, a, i, c) {\n    var p;\n    return d(\"caret\", t, s, o, a, i, c), R(o) ? p = \"\" : R(a) ? p = \">=\".concat(o, \".0.0\").concat(r, \" <\").concat(+o + 1, \".0.0-0\") : R(i) ? p = o === \"0\" ? \">=\".concat(o, \".\").concat(a, \".0\").concat(r, \" <\").concat(o, \".\").concat(+a + 1, \".0-0\") : \">=\".concat(o, \".\").concat(a, \".0\").concat(r, \" <\").concat(+o + 1, \".0.0-0\") : c ? (d(\"replaceCaret pr\", c), p = o === \"0\" ? a === \"0\" ? \">=\".concat(o, \".\").concat(a, \".\").concat(i, \"-\").concat(c, \" <\").concat(o, \".\").concat(a, \".\").concat(+i + 1, \"-0\") : \">=\".concat(o, \".\").concat(a, \".\").concat(i, \"-\").concat(c, \" <\").concat(o, \".\").concat(+a + 1, \".0-0\") : \">=\".concat(o, \".\").concat(a, \".\").concat(i, \"-\").concat(c, \" <\").concat(+o + 1, \".0.0-0\")) : (d(\"no pr\"), p = o === \"0\" ? a === \"0\" ? \">=\".concat(o, \".\").concat(a, \".\").concat(i).concat(r, \" <\").concat(o, \".\").concat(a, \".\").concat(+i + 1, \"-0\") : \">=\".concat(o, \".\").concat(a, \".\").concat(i).concat(r, \" <\").concat(o, \".\").concat(+a + 1, \".0-0\") : \">=\".concat(o, \".\").concat(a, \".\").concat(i, \" <\").concat(+o + 1, \".0.0-0\")), d(\"caret return\", p), p;\n  });\n},\n    rn = function rn(t, e) {\n  return d(\"replaceXRanges\", t, e), t.split(/\\s+/).map(function (n) {\n    return sn(n, e);\n  }).join(\" \");\n},\n    sn = function sn(t, e) {\n  t = t.trim();\n  var n = e.loose ? y[f.XRANGELOOSE] : y[f.XRANGE];\n  return t.replace(n, function (r, s, o, a, i, c) {\n    d(\"xRange\", t, r, s, o, a, i, c);\n    var p = R(o),\n        l = p || R(a),\n        u = l || R(i),\n        v = u;\n    return s === \"=\" && v && (s = \"\"), c = e.includePrerelease ? \"-0\" : \"\", p ? r = s === \">\" || s === \"<\" ? \"<0.0.0-0\" : \"*\" : s && v ? (l && (a = 0), i = 0, s === \">\" ? (s = \">=\", l ? (o = +o + 1, a = 0, i = 0) : (a = +a + 1, i = 0)) : s === \"<=\" && (s = \"<\", l ? o = +o + 1 : a = +a + 1), s === \"<\" && (c = \"-0\"), r = \"\".concat(s + o, \".\").concat(a, \".\").concat(i).concat(c)) : l ? r = \">=\".concat(o, \".0.0\").concat(c, \" <\").concat(+o + 1, \".0.0-0\") : u && (r = \">=\".concat(o, \".\").concat(a, \".0\").concat(c, \" <\").concat(o, \".\").concat(+a + 1, \".0-0\")), d(\"xRange return\", r), r;\n  });\n},\n    on = function on(t, e) {\n  return d(\"replaceStars\", t, e), t.trim().replace(y[f.STAR], \"\");\n},\n    an = function an(t, e) {\n  return d(\"replaceGTE0\", t, e), t.trim().replace(y[e.includePrerelease ? f.GTE0PRE : f.GTE0], \"\");\n},\n    cn = function cn(t) {\n  return function (e, n, r, s, o, a, i, c, p, l, u, v, M) {\n    return \"\".concat(n = R(r) ? \"\" : R(s) ? \">=\".concat(r, \".0.0\").concat(t ? \"-0\" : \"\") : R(o) ? \">=\".concat(r, \".\").concat(s, \".0\").concat(t ? \"-0\" : \"\") : a ? \">=\".concat(n) : \">=\".concat(n).concat(t ? \"-0\" : \"\"), \" \").concat(c = R(p) ? \"\" : R(l) ? \"<\".concat(+p + 1, \".0.0-0\") : R(u) ? \"<\".concat(p, \".\").concat(+l + 1, \".0-0\") : v ? \"<=\".concat(p, \".\").concat(l, \".\").concat(u, \"-\").concat(v) : t ? \"<\".concat(p, \".\").concat(l, \".\").concat(+u + 1, \"-0\") : \"<=\".concat(c)).trim();\n  };\n},\n    ln = function ln(t, e, n) {\n  for (var r = 0; r < t.length; r++) {\n    if (!t[r].test(e)) return !1;\n  }\n\n  if (e.prerelease.length && !n.includePrerelease) {\n    for (var _r = 0; _r < t.length; _r++) {\n      if (d(t[_r].semver), t[_r].semver !== O.ANY && t[_r].semver.prerelease.length > 0) {\n        var s = t[_r].semver;\n        if (s.major === e.major && s.minor === e.minor && s.patch === e.patch) return !0;\n      }\n    }\n\n    return !1;\n  }\n\n  return !0;\n},\n    Je = function Je(t, e, n) {\n  try {\n    e = new N(e, n);\n  } catch (r) {\n    return !1;\n  }\n\n  return e.test(t);\n};\n\nvar pn = de.MAX_LENGTH,\n    qe = K.re,\n    Ge = K.t,\n    un = function un(t, e) {\n  if (e && typeof e == \"object\" || (e = {\n    loose: !!e,\n    includePrerelease: !1\n  }), t instanceof E) return t;\n  if (typeof t != \"string\" || t.length > pn || !(e.loose ? qe[Ge.LOOSE] : qe[Ge.FULL]).test(t)) return null;\n\n  try {\n    return new E(t, e);\n  } catch (n) {\n    return null;\n  }\n},\n    dn = un,\n    Y = K.re,\n    Z = K.t,\n    Ue = function Ue(t, e) {\n  if (t instanceof E) return t;\n  if (typeof t == \"number\" && (t = String(t)), typeof t != \"string\") return null;\n  var n = null;\n\n  if ((e = e || {}).rtl) {\n    var r;\n\n    for (; (r = Y[Z.COERCERTL].exec(t)) && (!n || n.index + n[0].length !== t.length);) {\n      n && r.index + r[0].length === n.index + n[0].length || (n = r), Y[Z.COERCERTL].lastIndex = r.index + r[1].length + r[2].length;\n    }\n\n    Y[Z.COERCERTL].lastIndex = -1;\n  } else n = t.match(Y[Z.COERCE]);\n\n  return n === null ? null : dn(\"\".concat(n[2], \".\").concat(n[3] || \"0\", \".\").concat(n[4] || \"0\"), e);\n};\n\nfunction mn(t) {\n  return String.fromCharCode(parseInt(t.slice(1), 16));\n}\n\nfunction En(t) {\n  return \"%\".concat(\"00\".concat(t.charCodeAt(0).toString(16)).slice(-2));\n}\n\nfunction hn(t) {\n  return btoa(encodeURIComponent(t).replace(/%[0-9A-F]{2}/g, mn));\n}\n\nfunction fn(t) {\n  return decodeURIComponent(Array.from(atob(t), En).join(\"\"));\n}\n\nfunction Q(t) {\n  return hn(JSON.stringify(t));\n}\n\nfunction Ke(t) {\n  return JSON.parse(fn(t));\n}\n\nimport { RPCErrorCode as vn, SDKErrorCode as J, SDKWarningCode as ne } from \"@magic-sdk/types\";\nimport { MagicPayloadMethod as yn, RPCErrorCode as gn } from \"@magic-sdk/types\";\n\nfunction $(t) {\n  return typeof t == \"undefined\";\n}\n\nfunction Rn(t) {\n  return t === null;\n}\n\nfunction ee(t) {\n  return Rn(t) || $(t);\n}\n\nfunction er(t) {\n  return ee(t) ? !1 : !$(t.jsonrpc) && !$(t.id) && !$(t.method) && !$(t.params);\n}\n\nfunction je(t) {\n  return ee(t) ? !1 : !$(t.jsonrpc) && !$(t.id) && (!$(t.result) || !$(t.error));\n}\n\nfunction tr(t) {\n  return ee(t) ? !1 : typeof t == \"string\" && Object.values(yn).includes(t);\n}\n\nfunction Fe(t) {\n  return ee(t) ? !1 : typeof t == \"number\" && Object.values(gn).includes(t);\n}\n\nfunction te(t) {\n  if (!t) return !0;\n\n  for (var e in t) {\n    if (Object.hasOwnProperty.call(t, e)) return !1;\n  }\n\n  return !0;\n}\n\nvar m = {};\n\nfunction Tn(t, e) {\n  return Object.assign(m, e), t;\n}\n\nvar We = {\n  \"magic-sdk\": \"magic-sdk\",\n  \"@magic-sdk/react-native\": \"magic-sdk-rn\"\n};\n\nvar b = /*#__PURE__*/function (_Error) {\n  _inherits(b, _Error);\n\n  var _super = _createSuper(b);\n\n  function b(e, n) {\n    var _this3;\n\n    _classCallCheck(this, b);\n\n    _this3 = _super.call(this, \"Magic SDK Error: [\".concat(e, \"] \").concat(n));\n    _this3.code = e;\n    _this3.rawMessage = n;\n    _this3.__proto__ = Error;\n    Object.setPrototypeOf(_assertThisInitialized(_this3), b.prototype);\n    return _this3;\n  }\n\n  return _createClass(b);\n}( /*#__PURE__*/_wrapNativeSuper(Error)),\n    w = /*#__PURE__*/function (_Error2) {\n  _inherits(w, _Error2);\n\n  var _super2 = _createSuper(w);\n\n  function w(e) {\n    var _this4;\n\n    _classCallCheck(this, w);\n\n    _this4 = _super2.call(this);\n    _this4.__proto__ = Error;\n    var n = Number(e == null ? void 0 : e.code);\n    _this4.rawMessage = (e == null ? void 0 : e.message) || \"Internal error\", _this4.code = Fe(n) ? n : vn.InternalError, _this4.message = \"Magic RPC Error: [\".concat(_this4.code, \"] \").concat(_this4.rawMessage), Object.setPrototypeOf(_assertThisInitialized(_this4), w.prototype);\n    return _this4;\n  }\n\n  return _createClass(w);\n}( /*#__PURE__*/_wrapNativeSuper(Error)),\n    W = /*#__PURE__*/function () {\n  function W(e, n) {\n    _classCallCheck(this, W);\n\n    this.code = e;\n    this.rawMessage = n;\n    this.message = \"Magic SDK Warning: [\".concat(e, \"] \").concat(n);\n  }\n\n  _createClass(W, [{\n    key: \"log\",\n    value: function log() {\n      console.warn(this.message);\n    }\n  }]);\n\n  return W;\n}(),\n    X = /*#__PURE__*/function (_Error3) {\n  _inherits(X, _Error3);\n\n  var _super3 = _createSuper(X);\n\n  function X(e, n, r, s) {\n    var _this5;\n\n    _classCallCheck(this, X);\n\n    _this5 = _super3.call(this, \"Magic Extension Error (\".concat(e.name, \"): [\").concat(n, \"] \").concat(r));\n    _this5.code = n;\n    _this5.rawMessage = r;\n    _this5.data = s;\n    _this5.__proto__ = Error;\n    Object.setPrototypeOf(_assertThisInitialized(_this5), X.prototype);\n    return _this5;\n  }\n\n  return _createClass(X);\n}( /*#__PURE__*/_wrapNativeSuper(Error)),\n    re = /*#__PURE__*/function () {\n  function re(e, n, r) {\n    _classCallCheck(this, re);\n\n    this.code = n;\n    this.rawMessage = r;\n    this.message = \"Magic Extension Warning (\".concat(e.name, \"): [\").concat(n, \"] \").concat(r);\n  }\n\n  _createClass(re, [{\n    key: \"log\",\n    value: function log() {\n      console.warn(this.message);\n    }\n  }]);\n\n  return re;\n}();\n\nfunction Xe() {\n  return new b(J.MissingApiKey, \"Please provide an API key that you acquired from the Magic developer dashboard.\");\n}\n\nfunction cr() {\n  return new b(J.ModalNotReady, \"Modal is not ready.\");\n}\n\nfunction Be() {\n  return new b(J.MalformedResponse, \"Response from the Magic iframe is malformed.\");\n}\n\nfunction He(t) {\n  return new b(J.ExtensionNotInitialized, \"Extensions must be initialized with a Magic SDK instance before `Extension.\".concat(t, \"` can be accessed. Do not invoke `Extension.\").concat(t, \"` inside an extension constructor.\"));\n}\n\nfunction Ve(t) {\n  var e = \"Some extensions are incompatible with `\".concat(m.sdkName, \"@\").concat(m.version, \"`:\");\n  return t.filter(function (n) {\n    return typeof n.compat != \"undefined\" && n.compat !== null;\n  }).forEach(function (n) {\n    var r = n.compat[m.sdkName];\n    typeof r == \"string\" ? e += \"\\n  - Extension `\".concat(n.name, \"` supports version(s) `\").concat(r, \"`\") : r || (e += \"\\n  - Extension `\".concat(n.name, \"` does not support \").concat(m.platform, \" environments.\"));\n  }), new b(J.IncompatibleExtensions, e);\n}\n\nfunction ze(t) {\n  var e = function e(n) {\n    var r = n + 1,\n        s = r % 10,\n        o = r % 100;\n    return s === 1 && o !== 11 ? \"\".concat(r, \"st\") : s === 2 && o !== 12 ? \"\".concat(r, \"nd\") : s === 3 && o !== 13 ? \"\".concat(r, \"rd\") : \"\".concat(r, \"th\");\n  };\n\n  return new b(J.InvalidArgument, \"Invalid \".concat(e(t.argument), \" argument given to `\").concat(t.procedure, \"`.\\n  Expected: `\").concat(t.expected, \"`\\n  Received: `\").concat(t.received, \"`\"));\n}\n\nfunction lr() {\n  return new W(ne.DuplicateIframe, \"Duplicate iframes found.\");\n}\n\nfunction Ye() {\n  return new W(ne.SyncWeb3Method, \"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.\");\n}\n\nfunction Ze() {\n  return new W(ne.ReactNativeEndpointConfiguration, \"CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The `endpoint` parameter SHOULD NOT be provided. The Magic `<iframe>` is automatically wrapped by a WebView pointed at `\".concat(m.defaultEndpoint, \"`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.\"));\n}\n\nfunction pr(t) {\n  var e = t.method,\n      n = t.removalVersions,\n      r = t.useInstead,\n      s = n[m.sdkName],\n      o = r ? \" Use `\".concat(r, \"` instead.\") : \"\",\n      a = \"`\".concat(e, \"` will be removed from `\").concat(m.sdkName, \"` in version `\").concat(s, \"`.\").concat(o);\n  return new W(ne.DeprecationNotice, a);\n}\n\nimport { MagicPayloadMethod as A } from \"@magic-sdk/types\";\nimport { MagicOutgoingWindowMessage as Mn, MagicIncomingWindowMessage as Nn } from \"@magic-sdk/types\";\n\nfunction xn() {\n  var t;\n  return _regeneratorRuntime.wrap(function xn$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          t = 0;\n\n        case 1:\n          if (!(t < Number.MAX_SAFE_INTEGER)) {\n            _context.next = 6;\n            break;\n          }\n\n          _context.next = 4;\n          return ++t;\n\n        case 4:\n          _context.next = 7;\n          break;\n\n        case 6:\n          t = 0;\n\n        case 7:\n          _context.next = 1;\n          break;\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\nvar In = xn();\n\nfunction Ee() {\n  return In.next().value;\n}\n\nvar Qe = Symbol(\"Payload pre-processed by Magic SDK\");\n\nfunction et(t) {\n  return Object.defineProperty(t, Qe, {\n    value: !0,\n    enumerable: !1\n  }), t;\n}\n\nfunction Pn(t) {\n  return !!t[Qe];\n}\n\nfunction C(t) {\n  var e, n, r;\n  return Pn(t) || (t.jsonrpc = (e = t.jsonrpc) != null ? e : \"2.0\", t.id = Ee(), t.method = (n = t.method) != null ? n : \"noop\", t.params = (r = t.params) != null ? r : [], et(t)), t;\n}\n\nfunction h(t) {\n  var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return et({\n    params: e,\n    method: t,\n    jsonrpc: \"2.0\",\n    id: Ee()\n  });\n}\n\nvar _ = /*#__PURE__*/function () {\n  function _(e) {\n    _classCallCheck(this, _);\n\n    e instanceof _ ? (this._jsonrpc = e.payload.jsonrpc, this._id = e.payload.id, this._result = e.payload.result, this._error = e.payload.error) : je(e) ? (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = e.result, this._error = e.error) : (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = void 0, this._error = void 0);\n  }\n\n  _createClass(_, [{\n    key: \"applyError\",\n    value: function applyError(e) {\n      return this._error = e, this;\n    }\n  }, {\n    key: \"applyResult\",\n    value: function applyResult(e) {\n      return this._result = e, this;\n    }\n  }, {\n    key: \"hasError\",\n    get: function get() {\n      return typeof this._error != \"undefined\" && this._error !== null;\n    }\n  }, {\n    key: \"hasResult\",\n    get: function get() {\n      return typeof this._result != \"undefined\";\n    }\n  }, {\n    key: \"payload\",\n    get: function get() {\n      return {\n        jsonrpc: this._jsonrpc,\n        id: this._id,\n        result: this._result,\n        error: this._error\n      };\n    }\n  }]);\n\n  return _;\n}();\n\nvar rt = wt(nt()),\n    st = /*#__PURE__*/function (_rt$default) {\n  _inherits(st, _rt$default);\n\n  var _super4 = _createSuper(st);\n\n  function st() {\n    _classCallCheck(this, st);\n\n    return _super4.apply(this, arguments);\n  }\n\n  return _createClass(st);\n}(rt.default);\n\nfunction oe() {\n  var t = new st();\n  return {\n    emitter: t,\n    createChainingEmitterMethod: function createChainingEmitterMethod(r, s) {\n      return function () {\n        for (var _len2 = arguments.length, o = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          o[_key2] = arguments[_key2];\n        }\n\n        return t[r].apply(t, o), s;\n      };\n    },\n    createBoundEmitterMethod: function createBoundEmitterMethod(r) {\n      return function () {\n        for (var _len3 = arguments.length, s = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          s[_key3] = arguments[_key3];\n        }\n\n        return t[r].apply(t, s);\n      };\n    }\n  };\n}\n\nvar ot = Symbol(\"isPromiEvent\");\n\nfunction it(t) {\n  return !!t[ot];\n}\n\nfunction ie(t) {\n  var e = fe(t),\n      _oe = oe(),\n      n = _oe.createBoundEmitterMethod,\n      r = _oe.createChainingEmitterMethod,\n      s = Symbol(\"Promise.then\"),\n      o = Symbol(\"Promise.catch\"),\n      a = Symbol(\"Promise.finally\"),\n      i = function i(l, u) {\n    return function () {\n      for (var _len4 = arguments.length, v = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        v[_key4] = arguments[_key4];\n      }\n\n      var M = u[l].apply(u, v);\n      return c(M);\n    };\n  },\n      c = function c(l) {\n    var _Object$assign;\n\n    return Object.assign(l, (_Object$assign = {}, _defineProperty(_Object$assign, ot, !0), _defineProperty(_Object$assign, s, l[s] || l.then), _defineProperty(_Object$assign, o, l[o] || l.catch), _defineProperty(_Object$assign, a, l[a] || l.finally), _defineProperty(_Object$assign, \"then\", i(s, l)), _defineProperty(_Object$assign, \"catch\", i(o, l)), _defineProperty(_Object$assign, \"finally\", i(a, l)), _defineProperty(_Object$assign, \"on\", r(\"on\", l)), _defineProperty(_Object$assign, \"once\", r(\"once\", l)), _defineProperty(_Object$assign, \"addListener\", r(\"addListener\", l)), _defineProperty(_Object$assign, \"off\", r(\"off\", l)), _defineProperty(_Object$assign, \"removeListener\", r(\"removeListener\", l)), _defineProperty(_Object$assign, \"removeAllListeners\", r(\"removeAllListeners\", l)), _defineProperty(_Object$assign, \"emit\", n(\"emit\")), _defineProperty(_Object$assign, \"eventNames\", n(\"eventNames\")), _defineProperty(_Object$assign, \"listeners\", n(\"listeners\")), _defineProperty(_Object$assign, \"listenerCount\", n(\"listenerCount\")), _Object$assign));\n  },\n      p = c(e.then(function (l) {\n    return p.emit(\"done\", l), p.emit(\"settled\"), l;\n  }, function (l) {\n    throw p.emit(\"error\", l), p.emit(\"settled\"), l;\n  }));\n\n  return p;\n}\n\nfunction fe(t) {\n  return new Promise(function (e, n) {\n    var r = t(e, n);\n    Promise.resolve(r).catch(n);\n  });\n}\n\nvar P = /*#__PURE__*/function () {\n  function P(e) {\n    _classCallCheck(this, P);\n\n    this.sdk = e;\n  }\n\n  _createClass(P, [{\n    key: \"overlay\",\n    get: function get() {\n      return this.sdk.overlay;\n    }\n  }, {\n    key: \"request\",\n    value: function request(e) {\n      var n = this.overlay.post(Mn.MAGIC_HANDLE_REQUEST, C(e)),\n          r = ie(function (o, a) {\n        n.then(function (i) {\n          if (s(), i.hasError) a(new w(i.payload.error));else if (i.hasResult) o(i.payload.result);else throw Be();\n        }).catch(function (i) {\n          s(), a(i);\n        });\n      }),\n          s = this.overlay.on(Nn.MAGIC_HANDLE_EVENT, function (o) {\n        var i;\n        var a = o.data.response;\n\n        if (a.id === e.id && ((i = a.result) == null ? void 0 : i.event)) {\n          var _a$result = a.result,\n              c = _a$result.event,\n              _a$result$params = _a$result.params,\n              p = _a$result$params === void 0 ? [] : _a$result$params;\n          r.emit.apply(r, [c].concat(_toConsumableArray(p)));\n        }\n      });\n      return r;\n    }\n  }]);\n\n  return P;\n}();\n\nvar ye = /*#__PURE__*/function (_P) {\n  _inherits(ye, _P);\n\n  var _super5 = _createSuper(ye);\n\n  function ye() {\n    _classCallCheck(this, ye);\n\n    return _super5.apply(this, arguments);\n  }\n\n  _createClass(ye, [{\n    key: \"loginWithMagicLink\",\n    value: function loginWithMagicLink(e) {\n      var n = e.email,\n          _e$showUI = e.showUI,\n          r = _e$showUI === void 0 ? !0 : _e$showUI,\n          s = e.redirectURI,\n          o = h(this.sdk.testMode ? A.LoginWithMagicLinkTestMode : A.LoginWithMagicLink, [{\n        email: n,\n        showUI: r,\n        redirectURI: s\n      }]);\n      return this.request(o);\n    }\n  }, {\n    key: \"loginWithSMS\",\n    value: function loginWithSMS(e) {\n      var n = e.phoneNumber,\n          r = h(this.sdk.testMode ? A.LoginWithSmsTestMode : A.LoginWithSms, [{\n        phoneNumber: n,\n        showUI: !0\n      }]);\n      return this.request(r);\n    }\n  }, {\n    key: \"loginWithEmailOTP\",\n    value: function loginWithEmailOTP(e) {\n      var n = e.email,\n          r = h(this.sdk.testMode ? A.LoginWithEmailOTPTestMode : A.LoginWithEmailOTP, [{\n        email: n,\n        showUI: !0\n      }]);\n      return this.request(r);\n    }\n  }, {\n    key: \"loginWithCredential\",\n    value: function loginWithCredential(e) {\n      var n = e != null ? e : \"\";\n\n      if (!e && m.platform === \"web\") {\n        n = window.location.search;\n        var s = window.location.origin + window.location.pathname;\n        window.history.replaceState(null, \"\", s);\n      }\n\n      var r = h(this.sdk.testMode ? A.LoginWithCredentialTestMode : A.LoginWithCredential, [n]);\n      return this.request(r);\n    }\n  }]);\n\n  return ye;\n}(P);\n\nimport { MagicPayloadMethod as x } from \"@magic-sdk/types\";\nvar H = {};\nMt(H, {\n  clear: function clear() {\n    return wn;\n  },\n  getItem: function getItem() {\n    return D;\n  },\n  iterate: function iterate() {\n    return On;\n  },\n  key: function key() {\n    return Ln;\n  },\n  keys: function keys() {\n    return Sn;\n  },\n  length: function length() {\n    return An;\n  },\n  removeItem: function removeItem() {\n    return ce;\n  },\n  setItem: function setItem() {\n    return q;\n  }\n});\nvar ae;\n\nfunction L(t) {\n  var _this6 = this;\n\n  return function () {\n    for (var _len5 = arguments.length, e = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      e[_key5] = arguments[_key5];\n    }\n\n    return I(_this6, null, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _ae;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.t0 = ae;\n\n              if (_context2.t0) {\n                _context2.next = 5;\n                break;\n              }\n\n              _context2.next = 4;\n              return m.configureStorage();\n\n            case 4:\n              ae = _context2.sent;\n\n            case 5:\n              _context2.next = 7;\n              return ae.ready();\n\n            case 7:\n              return _context2.abrupt(\"return\", (_ae = ae)[t].apply(_ae, e));\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee);\n    }));\n  };\n}\n\nvar D = L(\"getItem\"),\n    q = L(\"setItem\"),\n    ce = L(\"removeItem\"),\n    wn = L(\"clear\"),\n    An = L(\"length\"),\n    Ln = L(\"key\"),\n    Sn = L(\"keys\"),\n    On = L(\"iterate\");\n\nfunction at() {\n  var t = window.crypto.getRandomValues(new Uint8Array(16));\n  t[6] = t[6] & 15 | 64, t[8] = t[8] & 191 | 128;\n  var e = \"\";\n  return e += t[0].toString(16), e += t[1].toString(16), e += t[2].toString(16), e += t[3].toString(16), e += \"-\", e += t[4].toString(16), e += t[5].toString(16), e += \"-\", e += t[6].toString(16), e += t[7].toString(16), e += \"-\", e += t[8].toString(16), e += t[9].toString(16), e += \"-\", e += t[10].toString(16), e += t[11].toString(16), e += t[12].toString(16), e += t[13].toString(16), e += t[14].toString(16), e += t[15].toString(16), e;\n}\n\nvar ge = \"STORE_KEY_PRIVATE_KEY\",\n    le = \"STORE_KEY_PUBLIC_JWK\",\n    Re = \"ECDSA\",\n    ct = \"P-256\",\n    Cn = {\n  name: Re,\n  namedCurve: ct\n},\n    _n = {\n  name: Re,\n  namedCurve: ct\n};\n\nfunction lt() {\n  ce(le), ce(ge);\n}\n\nfunction pt() {\n  return I(this, null, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var t, e, n, r, s, o, a, i, c;\n    return _regeneratorRuntime.wrap(function _callee2$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return Dn();\n\n          case 2:\n            t = _context3.sent;\n\n            if (t) {\n              _context3.next = 6;\n              break;\n            }\n\n            console.info(\"unable to create public key or webcrypto is unsupported\");\n            return _context3.abrupt(\"return\");\n\n          case 6:\n            e = window.crypto.subtle;\n            _context3.next = 9;\n            return D(ge);\n\n          case 9:\n            n = _context3.sent;\n\n            if (!(!n || !e)) {\n              _context3.next = 13;\n              break;\n            }\n\n            console.info(\"unable to find private key or webcrypto unsupported\");\n            return _context3.abrupt(\"return\");\n\n          case 13:\n            r = {\n              iat: Math.floor(new Date().getTime() / 1e3),\n              jti: at()\n            };\n            s = {\n              typ: \"dpop+jwt\",\n              alg: \"ES256\",\n              jwk: t\n            };\n            o = {\n              protected: ut(JSON.stringify(s)),\n              claims: ut(JSON.stringify(r))\n            };\n            a = qn(\"\".concat(o.protected, \".\").concat(o.claims));\n            i = {\n              name: Re,\n              hash: {\n                name: \"SHA-256\"\n              }\n            };\n            _context3.t0 = Un;\n            _context3.t1 = Uint8Array;\n            _context3.next = 22;\n            return e.sign(i, n, a);\n\n          case 22:\n            _context3.t2 = _context3.sent;\n            _context3.t3 = new _context3.t1(_context3.t2);\n            c = (0, _context3.t0)(_context3.t3);\n            return _context3.abrupt(\"return\", \"\".concat(o.protected, \".\").concat(o.claims, \".\").concat(c));\n\n          case 26:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\n\nfunction Dn() {\n  return I(this, null, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    return _regeneratorRuntime.wrap(function _callee3$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (Jn()) {\n              _context4.next = 3;\n              break;\n            }\n\n            console.info(\"webcrypto is not supported\");\n            return _context4.abrupt(\"return\");\n\n          case 3:\n            _context4.next = 5;\n            return D(le);\n\n          case 5:\n            _context4.t0 = _context4.sent;\n\n            if (_context4.t0) {\n              _context4.next = 9;\n              break;\n            }\n\n            _context4.next = 9;\n            return kn();\n\n          case 9:\n            return _context4.abrupt(\"return\", D(le));\n\n          case 10:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}\n\nfunction kn() {\n  return I(this, null, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    var t, e, n, r, s;\n    return _regeneratorRuntime.wrap(function _callee4$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            t = null;\n            e = window.crypto.subtle;\n            _context5.next = 4;\n            return e.generateKey(Cn, !0, [\"sign\"]);\n\n          case 4:\n            n = _context5.sent;\n            _context5.next = 7;\n            return e.exportKey(\"jwk\", n.privateKey);\n\n          case 7:\n            r = _context5.sent;\n            _context5.next = 10;\n            return e.exportKey(\"jwk\", n.publicKey);\n\n          case 10:\n            t = _context5.sent;\n            _context5.next = 13;\n            return e.importKey(\"jwk\", r, _n, !1, [\"sign\"]);\n\n          case 13:\n            s = _context5.sent;\n            _context5.next = 16;\n            return q(ge, s);\n\n          case 16:\n            _context5.next = 18;\n            return q(le, t);\n\n          case 18:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee4);\n  }));\n}\n\nfunction Jn() {\n  var t = typeof window != \"undefined\" && !!window.crypto,\n      e = t && !!window.crypto.subtle;\n  return t && e;\n}\n\nfunction ut(t) {\n  return dt(Gn(t));\n}\n\nfunction qn(t) {\n  return new TextEncoder().encode(t);\n}\n\nfunction dt(t) {\n  return btoa(t).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+/g, \"\");\n}\n\nfunction Gn(t) {\n  return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g, function (n, r) {\n    return String.fromCharCode(parseInt(r, 16));\n  });\n}\n\nfunction Un(t) {\n  var e = \"\";\n  return t.forEach(function (n) {\n    e += String.fromCharCode(n);\n  }), dt(e);\n}\n\nvar Te = /*#__PURE__*/function (_P2) {\n  _inherits(Te, _P2);\n\n  var _super6 = _createSuper(Te);\n\n  function Te() {\n    _classCallCheck(this, Te);\n\n    return _super6.apply(this, arguments);\n  }\n\n  _createClass(Te, [{\n    key: \"getIdToken\",\n    value: function getIdToken(e) {\n      var n = h(this.sdk.testMode ? x.GetIdTokenTestMode : x.GetIdToken, [e]);\n      return this.request(n);\n    }\n  }, {\n    key: \"generateIdToken\",\n    value: function generateIdToken(e) {\n      var n = h(this.sdk.testMode ? x.GenerateIdTokenTestMode : x.GenerateIdToken, [e]);\n      return this.request(n);\n    }\n  }, {\n    key: \"getMetadata\",\n    value: function getMetadata() {\n      var e = h(this.sdk.testMode ? x.GetMetadataTestMode : x.GetMetadata);\n      return this.request(e);\n    }\n  }, {\n    key: \"updateEmail\",\n    value: function updateEmail(e) {\n      var n = e.email,\n          _e$showUI2 = e.showUI,\n          r = _e$showUI2 === void 0 ? !0 : _e$showUI2,\n          s = h(this.sdk.testMode ? x.UpdateEmailTestMode : x.UpdateEmail, [{\n        email: n,\n        showUI: r\n      }]);\n      return this.request(s);\n    }\n  }, {\n    key: \"isLoggedIn\",\n    value: function isLoggedIn() {\n      var e = h(this.sdk.testMode ? x.IsLoggedInTestMode : x.IsLoggedIn);\n      return this.request(e);\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      lt();\n      var e = h(this.sdk.testMode ? x.LogoutTestMode : x.Logout);\n      return this.request(e);\n    }\n  }, {\n    key: \"showSettings\",\n    value: function showSettings() {\n      var e = h(this.sdk.testMode ? x.UserSettingsTestMode : x.UserSettings);\n      return this.request(e);\n    }\n  }]);\n\n  return Te;\n}(P);\n\nimport { MagicOutgoingWindowMessage as mt } from \"@magic-sdk/types\";\n\nvar _oe2 = oe(),\n    pe = _oe2.createBoundEmitterMethod,\n    G = _oe2.createChainingEmitterMethod,\n    ve = /*#__PURE__*/function (_P3) {\n  _inherits(ve, _P3);\n\n  var _super7 = _createSuper(ve);\n\n  function ve() {\n    var _this7;\n\n    _classCallCheck(this, ve);\n\n    _this7 = _super7.apply(this, arguments);\n    _this7.isMagic = !0;\n    _this7.on = G(\"on\", _assertThisInitialized(_this7));\n    _this7.once = G(\"once\", _assertThisInitialized(_this7));\n    _this7.addListener = G(\"addListener\", _assertThisInitialized(_this7));\n    _this7.off = G(\"off\", _assertThisInitialized(_this7));\n    _this7.removeListener = G(\"removeListener\", _assertThisInitialized(_this7));\n    _this7.removeAllListeners = G(\"removeAllListeners\", _assertThisInitialized(_this7));\n    _this7.emit = pe(\"emit\");\n    _this7.eventNames = pe(\"eventNames\");\n    _this7.listeners = pe(\"listeners\");\n    _this7.listenerCount = pe(\"listenerCount\");\n    return _this7;\n  }\n\n  _createClass(ve, [{\n    key: \"sendAsync\",\n    value: function sendAsync(e, n) {\n      var _this8 = this;\n\n      if (!n) throw ze({\n        procedure: \"Magic.rpcProvider.sendAsync\",\n        argument: 1,\n        expected: \"function\",\n        received: n === null ? \"null\" : typeof n\n      });\n      if (Array.isArray(e)) this.overlay.post(mt.MAGIC_HANDLE_REQUEST, e.map(function (r) {\n        var s = C(r);\n        return _this8.prefixPayloadMethodForTestMode(s), s;\n      })).then(function (r) {\n        n(null, r.map(function (s) {\n          return we(Ne({}, s.payload), {\n            error: s.hasError ? new w(s.payload.error) : null\n          });\n        }));\n      });else {\n        var r = C(e);\n        this.prefixPayloadMethodForTestMode(r), this.overlay.post(mt.MAGIC_HANDLE_REQUEST, r).then(function (s) {\n          n(s.hasError ? new w(s.payload.error) : null, s.payload);\n        });\n      }\n    }\n  }, {\n    key: \"send\",\n    value: function send(e, n) {\n      if (typeof e == \"string\") {\n        var s = h(e, Array.isArray(n) ? n : []);\n        return this.request(s);\n      }\n\n      if (Array.isArray(e) || !!n) {\n        this.sendAsync(e, n);\n        return;\n      }\n\n      var r = Ye();\n      return r.log(), new _(e).applyError({\n        code: -32603,\n        message: r.rawMessage\n      }).payload;\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      var e = h(\"eth_accounts\");\n      return this.request(e);\n    }\n  }, {\n    key: \"request\",\n    value: function request(e) {\n      return this.prefixPayloadMethodForTestMode(e), _get(_getPrototypeOf(ve.prototype), \"request\", this).call(this, e);\n    }\n  }, {\n    key: \"prefixPayloadMethodForTestMode\",\n    value: function prefixPayloadMethodForTestMode(e) {\n      var n = \"testMode/eth/\";\n      this.sdk.testMode && (e.method = \"\".concat(n).concat(e.method));\n    }\n  }]);\n\n  return ve;\n}(P);\n\nfunction xe(t, e) {\n  return e ? new URL(t, e) : new URL(t);\n}\n\nvar Et = [\"request\", \"overlay\", \"sdk\"];\n\nfunction Kn(t) {\n  var e = Object.getPrototypeOf(t),\n      n = [e];\n\n  for (; e !== P.prototype;) {\n    e = Object.getPrototypeOf(e), n.push(e);\n  }\n\n  return n;\n}\n\nvar Ie = /*#__PURE__*/function (_P4) {\n  _inherits(Ie, _P4);\n\n  var _super8 = _createSuper(Ie);\n\n  function Ie() {\n    var _this9;\n\n    _classCallCheck(this, Ie);\n\n    _this9 = _super8.call(this, void 0);\n    _this9.__sdk_access_field_descriptors__ = new Map();\n    _this9.__is_initialized__ = !1;\n    _this9.utils = {\n      createPromiEvent: ie,\n      isPromiEvent: it,\n      encodeJSON: Q,\n      decodeJSON: Ke,\n      createJsonRpcRequestPayload: h,\n      standardizeJsonRpcRequestPayload: C,\n      storage: H\n    };\n    var e = [_assertThisInitialized(_this9)].concat(_toConsumableArray(Kn(_assertThisInitialized(_this9))));\n    Et.forEach(function (n) {\n      var r = e.map(function (i) {\n        return Object.getOwnPropertyDescriptor(i, n);\n      }),\n          s = r.findIndex(function (i) {\n        return !!i;\n      }),\n          o = s > 0,\n          a = r[s];\n      a && (_this9.__sdk_access_field_descriptors__.set(n, {\n        descriptor: a,\n        isPrototypeField: o\n      }), Object.defineProperty(_assertThisInitialized(_this9), n, {\n        configurable: !0,\n        get: function get() {\n          throw He(n);\n        }\n      }));\n    });\n    return _this9;\n  }\n\n  _createClass(Ie, [{\n    key: \"init\",\n    value: function init(e) {\n      var _this10 = this;\n\n      this.__is_initialized__ || (Et.forEach(function (n) {\n        if (_this10.__sdk_access_field_descriptors__.has(n)) {\n          var _this10$__sdk_access_ = _this10.__sdk_access_field_descriptors__.get(n),\n              r = _this10$__sdk_access_.descriptor,\n              s = _this10$__sdk_access_.isPrototypeField;\n\n          s ? delete _this10[n] : Object.defineProperty(_this10, n, r);\n        }\n      }), this.sdk = e, this.__is_initialized__ = !0);\n    }\n  }, {\n    key: \"createDeprecationWarning\",\n    value: function createDeprecationWarning(e) {\n      var n = e.method,\n          r = e.removalVersion,\n          s = e.useInstead,\n          o = s ? \" Use `\".concat(s, \"` instead.\") : \"\",\n          a = \"`\".concat(n, \"` will be removed from this Extension in version `\").concat(r, \"`.\").concat(o);\n      return new re(this, \"DEPRECATION_NOTICE\", a);\n    }\n  }, {\n    key: \"createWarning\",\n    value: function createWarning(e, n) {\n      return new re(this, e, n);\n    }\n  }, {\n    key: \"createError\",\n    value: function createError(e, n, r) {\n      return new X(this, e, n, r);\n    }\n  }]);\n\n  return Ie;\n}(P),\n    ht = /*#__PURE__*/function (_Ie) {\n  _inherits(ht, _Ie);\n\n  var _super9 = _createSuper(ht);\n\n  function ht() {\n    _classCallCheck(this, ht);\n\n    return _super9.apply(this, arguments);\n  }\n\n  return _createClass(ht);\n}(Ie),\n    S = /*#__PURE__*/function (_Ie2) {\n  _inherits(S, _Ie2);\n\n  var _super10 = _createSuper(S);\n\n  function S() {\n    _classCallCheck(this, S);\n\n    return _super10.apply(this, arguments);\n  }\n\n  return _createClass(S);\n}(Ie);\n\nS.Internal = ht, S.Anonymous = \"anonymous extension\";\n\nfunction ft(t) {\n  return t.compat && t.compat[m.sdkName] != null ? typeof t.compat[m.sdkName] == \"string\" ? Je(Ue(m.version), t.compat[m.sdkName]) : !!t.compat[m.sdkName] : !0;\n}\n\nfunction jn(t) {\n  var _this11 = this;\n\n  var s;\n  var e = (s = t == null ? void 0 : t.extensions) != null ? s : [],\n      n = {},\n      r = [];\n  if (Array.isArray(e) ? e.forEach(function (o) {\n    ft(o) ? (o.init(_this11), (o.name || o.name !== S.Anonymous) && (_this11[o.name] = o), o instanceof S.Internal && (te(o.config) || (n[o.name] = o.config))) : r.push(o);\n  }) : Object.keys(e).forEach(function (o) {\n    if (ft(e[o])) {\n      e[o].init(_this11);\n      var a = e[o];\n      _this11[o] = a, a instanceof S.Internal && (te(a.config) || (n[e[o].name] = a.config));\n    } else r.push(e[o]);\n  }), r.length) throw Ve(r);\n  return n;\n}\n\nvar V = /*#__PURE__*/function () {\n  function V(e, n) {\n    _classCallCheck(this, V);\n\n    this.apiKey = e;\n    var a;\n    if (!e) throw Xe();\n    m.platform === \"react-native\" && (n == null ? void 0 : n.endpoint) && Ze().log();\n    var r = m.defaultEndpoint,\n        s = m.version;\n    this.testMode = !!(n == null ? void 0 : n.testMode), this.endpoint = xe((a = n == null ? void 0 : n.endpoint) != null ? a : r).origin, this.auth = new ye(this), this.user = new Te(this), this.rpcProvider = new ve(this);\n    var o = jn.call(this, n);\n    this.parameters = Q({\n      API_KEY: this.apiKey,\n      DOMAIN_ORIGIN: window.location ? window.location.origin : \"\",\n      ETH_NETWORK: n == null ? void 0 : n.network,\n      host: xe(this.endpoint).host,\n      sdk: We[m.sdkName],\n      version: s,\n      ext: te(o) ? void 0 : o,\n      locale: (n == null ? void 0 : n.locale) || \"en_US\"\n    });\n  }\n\n  _createClass(V, [{\n    key: \"overlay\",\n    get: function get() {\n      if (!V.__overlays__.has(this.parameters)) {\n        var e = new m.ViewController(this.endpoint, this.parameters);\n        e.init(), V.__overlays__.set(this.parameters, e);\n      }\n\n      return V.__overlays__.get(this.parameters);\n    }\n  }, {\n    key: \"preload\",\n    value: function preload() {\n      return I(this, null, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this.overlay.ready;\n\n              case 2:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n  }]);\n\n  return V;\n}(),\n    Pe = V;\n\nPe.__overlays__ = new Map();\nimport { MagicIncomingWindowMessage as ue } from \"@magic-sdk/types\";\n\nfunction Fn(t, e) {\n  return e && Array.isArray(t) ? t.find(function (n) {\n    return n.id === e;\n  }) : t;\n}\n\nfunction Wn(t, e) {\n  var s;\n  var n = (s = e.data.response) == null ? void 0 : s.id,\n      r = Fn(t, n);\n\n  if (n && r) {\n    var o = new _(r).applyResult(e.data.response.result).applyError(e.data.response.error);\n    return {\n      id: n,\n      response: o\n    };\n  }\n\n  return {};\n}\n\nfunction Xn(t, e) {\n  return I(this, null, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n    var n, r;\n    return _regeneratorRuntime.wrap(function _callee6$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return D(\"rt\");\n\n          case 2:\n            n = _context7.sent;\n\n            if (!(m.platform === \"web\")) {\n              _context7.next = 13;\n              break;\n            }\n\n            _context7.prev = 4;\n            _context7.next = 7;\n            return pt();\n\n          case 7:\n            r = _context7.sent;\n            _context7.next = 13;\n            break;\n\n          case 10:\n            _context7.prev = 10;\n            _context7.t0 = _context7[\"catch\"](4);\n            console.error(\"webcrypto error\", _context7.t0);\n\n          case 13:\n            return _context7.abrupt(\"return\", r ? n ? {\n              msgType: t,\n              payload: e,\n              jwt: r,\n              rt: n\n            } : {\n              msgType: t,\n              payload: e,\n              jwt: r\n            } : {\n              msgType: t,\n              payload: e\n            });\n\n          case 14:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee6, null, [[4, 10]]);\n  }));\n}\n\nfunction Bn(t) {\n  return I(this, null, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n    return _regeneratorRuntime.wrap(function _callee7$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.t0 = !t.data.rt;\n\n            if (_context8.t0) {\n              _context8.next = 4;\n              break;\n            }\n\n            _context8.next = 4;\n            return q(\"rt\", t.data.rt);\n\n          case 4:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee7);\n  }));\n}\n\nvar yt = /*#__PURE__*/function () {\n  function yt(e, n) {\n    _classCallCheck(this, yt);\n\n    this.endpoint = e;\n    this.parameters = n;\n    this.messageHandlers = new Set();\n    this.ready = this.waitForReady(), this.listen();\n  }\n\n  _createClass(yt, [{\n    key: \"post\",\n    value: function post(e, n) {\n      return I(this, null, /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n        var _this12 = this;\n\n        return _regeneratorRuntime.wrap(function _callee9$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                return _context10.abrupt(\"return\", fe(function (r) {\n                  return I(_this12, null, /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n                    var s, o, a, i, c;\n                    return _regeneratorRuntime.wrap(function _callee8$(_context9) {\n                      while (1) {\n                        switch (_context9.prev = _context9.next) {\n                          case 0:\n                            _context9.next = 2;\n                            return this.ready;\n\n                          case 2:\n                            s = [];\n                            o = Array.isArray(n) ? n.map(function (p) {\n                              return p.id;\n                            }) : [];\n                            _context9.next = 6;\n                            return Xn(\"\".concat(e, \"-\").concat(this.parameters), n);\n\n                          case 6:\n                            a = _context9.sent;\n                            _context9.next = 9;\n                            return this._post(a);\n\n                          case 9:\n                            i = function i(p) {\n                              return function (l) {\n                                var _Wn = Wn(n, l),\n                                    u = _Wn.id,\n                                    v = _Wn.response;\n\n                                Bn(l), u && v && Array.isArray(n) && o.includes(u) ? (s.push(v), s.length === n.length && (p(), r(s))) : u && v && !Array.isArray(n) && u === n.id && (p(), r(v));\n                              };\n                            }, c = this.on(ue.MAGIC_HANDLE_RESPONSE, i(function () {\n                              return c();\n                            }));\n\n                          case 10:\n                          case \"end\":\n                            return _context9.stop();\n                        }\n                      }\n                    }, _callee8, this);\n                  }));\n                }));\n\n              case 1:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee9);\n      }));\n    }\n  }, {\n    key: \"on\",\n    value: function on(e, n) {\n      var _this13 = this;\n\n      var r = n.bind(window),\n          s = function s(o) {\n        o.data.msgType === \"\".concat(e, \"-\").concat(_this13.parameters) && r(o);\n      };\n\n      return this.messageHandlers.add(s), function () {\n        return _this13.messageHandlers.delete(s);\n      };\n    }\n  }, {\n    key: \"waitForReady\",\n    value: function waitForReady() {\n      var _this14 = this;\n\n      return new Promise(function (e) {\n        _this14.on(ue.MAGIC_OVERLAY_READY, function () {\n          return e();\n        });\n      });\n    }\n  }, {\n    key: \"listen\",\n    value: function listen() {\n      var _this15 = this;\n\n      this.on(ue.MAGIC_HIDE_OVERLAY, function () {\n        _this15.hideOverlay();\n      }), this.on(ue.MAGIC_SHOW_OVERLAY, function () {\n        _this15.showOverlay();\n      });\n    }\n  }]);\n\n  return yt;\n}();\n\nexport { S as Extension, X as MagicExtensionError, re as MagicExtensionWarning, w as MagicRPCError, b as MagicSDKError, W as MagicSDKWarning, Pe as SDKBase, ge as STORE_KEY_PRIVATE_KEY, le as STORE_KEY_PUBLIC_JWK, st as TypedEmitter, yt as ViewController, lt as clearKeys, pr as createDeprecationWarning, lr as createDuplicateIframeWarning, He as createExtensionNotInitializedError, Ve as createIncompatibleExtensionsError, ze as createInvalidArgumentError, pt as createJwt, Be as createMalformedResponseError, Xe as createMissingApiKeyError, cr as createModalNotReadyError, ie as createPromiEvent, fe as createPromise, Ze as createReactNativeEndpointConfigurationWarning, Tn as createSDK, Ye as createSynchronousWeb3MethodWarning, oe as createTypedEmitter, xe as createURL, Ke as decodeJSON, Q as encodeJSON, Ee as getPayloadId, te as isEmpty, Fe as isJsonRpcErrorCode, er as isJsonRpcRequestPayload, je as isJsonRpcResponsePayload, tr as isMagicPayloadMethod, it as isPromiEvent, H as storage, at as uuid };","map":{"version":3,"sources":["../../node_modules/eventemitter3/index.js","../../src/util/semver.js","../../src/util/base64-json.ts","../../src/core/sdk-exceptions.ts","../../src/util/type-guards.ts","../../src/core/sdk-environment.ts","../../src/modules/auth.ts","../../src/modules/base-module.ts","../../src/util/get-payload-id.ts","../../src/core/json-rpc.ts","../../src/util/events.ts","../../src/util/promise-tools.ts","../../src/modules/user.ts","../../src/util/storage.ts","../../src/util/uuid.ts","../../src/util/web-crypto.ts","../../src/modules/rpc-provider.ts","../../src/util/url.ts","../../src/modules/base-extension.ts","../../src/core/sdk.ts","../../src/core/view-controller.ts"],"names":[],"mappings":"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","sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/* eslint-disable */\n/* istanbul ignore file */\n\n// DO NOT CHANGE THIS FILE.\n//\n// We have to bundle `semver` ourselves due to a long-standing cyclic dependency\n// which causes Rollup to break the `satisfies` function.\n//\n// See:\n//   - https://github.com/magiclabs/magic-js/issues/198\n//   - https://github.com/rollup/plugins/issues/879\n//   - https://github.com/npm/node-semver/issues/318\n//   - https://github.com/npm/node-semver/issues/381\n\nfunction createCommonjsModule(e){const r={exports:{}};return e(r,r.exports),r.exports}const SEMVER_SPEC_VERSION=\"2.0.0\",MAX_LENGTH$2=256,MAX_SAFE_INTEGER$1=Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH=16,constants={SEMVER_SPEC_VERSION:\"2.0.0\",MAX_LENGTH:256,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER$1,MAX_SAFE_COMPONENT_LENGTH:16},debug=\"object\"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\\bsemver\\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error(\"SEMVER\",...e):()=>{},debug_1=debug,re_1=createCommonjsModule(function(e,r){const{MAX_SAFE_COMPONENT_LENGTH:t}=constants,s=(r=e.exports={}).re=[],i=r.src=[],o=r.t={};let a=0;const n=(e,r,t)=>{const n=a++;debug_1(n,r),o[e]=n,i[n]=r,s[n]=new RegExp(r,t?\"g\":void 0)};n(\"NUMERICIDENTIFIER\",\"0|[1-9]\\\\d*\"),n(\"NUMERICIDENTIFIERLOOSE\",\"[0-9]+\"),n(\"NONNUMERICIDENTIFIER\",\"\\\\d*[a-zA-Z-][a-zA-Z0-9-]*\"),n(\"MAINVERSION\",`(${i[o.NUMERICIDENTIFIER]})\\\\.`+`(${i[o.NUMERICIDENTIFIER]})\\\\.`+`(${i[o.NUMERICIDENTIFIER]})`),n(\"MAINVERSIONLOOSE\",`(${i[o.NUMERICIDENTIFIERLOOSE]})\\\\.`+`(${i[o.NUMERICIDENTIFIERLOOSE]})\\\\.`+`(${i[o.NUMERICIDENTIFIERLOOSE]})`),n(\"PRERELEASEIDENTIFIER\",`(?:${i[o.NUMERICIDENTIFIER]}|${i[o.NONNUMERICIDENTIFIER]})`),n(\"PRERELEASEIDENTIFIERLOOSE\",`(?:${i[o.NUMERICIDENTIFIERLOOSE]}|${i[o.NONNUMERICIDENTIFIER]})`),n(\"PRERELEASE\",`(?:-(${i[o.PRERELEASEIDENTIFIER]}(?:\\\\.${i[o.PRERELEASEIDENTIFIER]})*))`),n(\"PRERELEASELOOSE\",`(?:-?(${i[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\\\.${i[o.PRERELEASEIDENTIFIERLOOSE]})*))`),n(\"BUILDIDENTIFIER\",\"[0-9A-Za-z-]+\"),n(\"BUILD\",`(?:\\\\+(${i[o.BUILDIDENTIFIER]}(?:\\\\.${i[o.BUILDIDENTIFIER]})*))`),n(\"FULLPLAIN\",`v?${i[o.MAINVERSION]}${i[o.PRERELEASE]}?${i[o.BUILD]}?`),n(\"FULL\",`^${i[o.FULLPLAIN]}$`),n(\"LOOSEPLAIN\",`[v=\\\\s]*${i[o.MAINVERSIONLOOSE]}${i[o.PRERELEASELOOSE]}?${i[o.BUILD]}?`),n(\"LOOSE\",`^${i[o.LOOSEPLAIN]}$`),n(\"GTLT\",\"((?:<|>)?=?)\"),n(\"XRANGEIDENTIFIERLOOSE\",`${i[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`),n(\"XRANGEIDENTIFIER\",`${i[o.NUMERICIDENTIFIER]}|x|X|\\\\*`),n(\"XRANGEPLAIN\",`[v=\\\\s]*(${i[o.XRANGEIDENTIFIER]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIER]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIER]})`+`(?:${i[o.PRERELEASE]})?${i[o.BUILD]}?`+\")?)?\"),n(\"XRANGEPLAINLOOSE\",`[v=\\\\s]*(${i[o.XRANGEIDENTIFIERLOOSE]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIERLOOSE]})`+`(?:\\\\.(${i[o.XRANGEIDENTIFIERLOOSE]})`+`(?:${i[o.PRERELEASELOOSE]})?${i[o.BUILD]}?`+\")?)?\"),n(\"XRANGE\",`^${i[o.GTLT]}\\\\s*${i[o.XRANGEPLAIN]}$`),n(\"XRANGELOOSE\",`^${i[o.GTLT]}\\\\s*${i[o.XRANGEPLAINLOOSE]}$`),n(\"COERCE\",`(^|[^\\\\d])(\\\\d{1,${t}})`+`(?:\\\\.(\\\\d{1,${t}}))?`+`(?:\\\\.(\\\\d{1,${t}}))?`+\"(?:$|[^\\\\d])\"),n(\"COERCERTL\",i[o.COERCE],!0),n(\"LONETILDE\",\"(?:~>?)\"),n(\"TILDETRIM\",`(\\\\s*)${i[o.LONETILDE]}\\\\s+`,!0),r.tildeTrimReplace=\"$1~\",n(\"TILDE\",`^${i[o.LONETILDE]}${i[o.XRANGEPLAIN]}$`),n(\"TILDELOOSE\",`^${i[o.LONETILDE]}${i[o.XRANGEPLAINLOOSE]}$`),n(\"LONECARET\",\"(?:\\\\^)\"),n(\"CARETTRIM\",`(\\\\s*)${i[o.LONECARET]}\\\\s+`,!0),r.caretTrimReplace=\"$1^\",n(\"CARET\",`^${i[o.LONECARET]}${i[o.XRANGEPLAIN]}$`),n(\"CARETLOOSE\",`^${i[o.LONECARET]}${i[o.XRANGEPLAINLOOSE]}$`),n(\"COMPARATORLOOSE\",`^${i[o.GTLT]}\\\\s*(${i[o.LOOSEPLAIN]})$|^$`),n(\"COMPARATOR\",`^${i[o.GTLT]}\\\\s*(${i[o.FULLPLAIN]})$|^$`),n(\"COMPARATORTRIM\",`(\\\\s*)${i[o.GTLT]}\\\\s*(${i[o.LOOSEPLAIN]}|${i[o.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace=\"$1$2$3\",n(\"HYPHENRANGE\",`^\\\\s*(${i[o.XRANGEPLAIN]})`+\"\\\\s+-\\\\s+\"+`(${i[o.XRANGEPLAIN]})`+\"\\\\s*$\"),n(\"HYPHENRANGELOOSE\",`^\\\\s*(${i[o.XRANGEPLAINLOOSE]})`+\"\\\\s+-\\\\s+\"+`(${i[o.XRANGEPLAINLOOSE]})`+\"\\\\s*$\"),n(\"STAR\",\"(<|>)?=?\\\\s*\\\\*\"),n(\"GTE0\",\"^\\\\s*>=\\\\s*0.0.0\\\\s*$\"),n(\"GTE0PRE\",\"^\\\\s*>=\\\\s*0.0.0-0\\\\s*$\")}),numeric=/^[0-9]+$/,compareIdentifiers$1=(e,r)=>{const t=numeric.test(e),s=numeric.test(r);return t&&s&&(e=+e,r=+r),e===r?0:t&&!s?-1:s&&!t?1:e<r?-1:1},rcompareIdentifiers=(e,r)=>compareIdentifiers$1(r,e),identifiers={compareIdentifiers:compareIdentifiers$1,rcompareIdentifiers:rcompareIdentifiers},{MAX_LENGTH:MAX_LENGTH$1,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER}=constants,{re:re$4,t:t$4}=re_1,{compareIdentifiers:compareIdentifiers}=identifiers;class SemVer{constructor(e,r){if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof SemVer){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(\"string\"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>MAX_LENGTH$1)throw new TypeError(`version is longer than ${MAX_LENGTH$1} characters`);debug_1(\"SemVer\",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const t=e.trim().match(r.loose?re$4[t$4.LOOSE]:re$4[t$4.FULL]);if(!t)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError(\"Invalid major version\");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError(\"Invalid minor version\");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError(\"Invalid patch version\");t[4]?this.prerelease=t[4].split(\".\").map(e=>{if(/^[0-9]+$/.test(e)){const r=+e;if(r>=0&&r<MAX_SAFE_INTEGER)return r}return e}):this.prerelease=[],this.build=t[5]?t[5].split(\".\"):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(\".\")}`),this.version}toString(){return this.version}compare(e){if(debug_1(\"SemVer.compare\",this.version,this.options,e),!(e instanceof SemVer)){if(\"string\"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),compareIdentifiers(this.major,e.major)||compareIdentifiers(this.minor,e.minor)||compareIdentifiers(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const t=this.prerelease[r],s=e.prerelease[r];if(debug_1(\"prerelease compare\",r,t,s),void 0===t&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===t)return-1;if(t!==s)return compareIdentifiers(t,s)}while(++r)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let r=0;do{const t=this.build[r],s=e.build[r];if(debug_1(\"prerelease compare\",r,t,s),void 0===t&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===t)return-1;if(t!==s)return compareIdentifiers(t,s)}while(++r)}inc(e,r){switch(e){case\"premajor\":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc(\"pre\",r);break;case\"preminor\":this.prerelease.length=0,this.patch=0,this.minor++,this.inc(\"pre\",r);break;case\"prepatch\":this.prerelease.length=0,this.inc(\"patch\",r),this.inc(\"pre\",r);break;case\"prerelease\":0===this.prerelease.length&&this.inc(\"patch\",r),this.inc(\"pre\",r);break;case\"major\":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case\"minor\":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case\"patch\":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case\"pre\":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)\"number\"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}const compare=(e,r,t)=>new SemVer(e,t).compare(new SemVer(r,t)),compare_1=compare,eq=(e,r,t)=>0===compare_1(e,r,t),eq_1=eq,neq=(e,r,t)=>0!==compare_1(e,r,t),neq_1=neq,gt=(e,r,t)=>compare_1(e,r,t)>0,gt_1=gt,gte=(e,r,t)=>compare_1(e,r,t)>=0,gte_1=gte,lt=(e,r,t)=>compare_1(e,r,t)<0,lt_1=lt,lte=(e,r,t)=>compare_1(e,r,t)<=0,lte_1=lte,cmp=(e,r,t,s)=>{switch(r){case\"===\":return\"object\"==typeof e&&(e=e.version),\"object\"==typeof t&&(t=t.version),e===t;case\"!==\":return\"object\"==typeof e&&(e=e.version),\"object\"==typeof t&&(t=t.version),e!==t;case\"\":case\"=\":case\"==\":return eq_1(e,t,s);case\"!=\":return neq_1(e,t,s);case\">\":return gt_1(e,t,s);case\">=\":return gte_1(e,t,s);case\"<\":return lt_1(e,t,s);case\"<=\":return lte_1(e,t,s);default:throw new TypeError(`Invalid operator: ${r}`)}},cmp_1=cmp,ANY=Symbol(\"SemVer ANY\");class Comparator{static get ANY(){return ANY}constructor(e,r){if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof Comparator){if(e.loose===!!r.loose)return e;e=e.value}debug_1(\"comparator\",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ANY?this.value=\"\":this.value=this.operator+this.semver.version,debug_1(\"comp\",this)}parse(e){const r=this.options.loose?re$3[t$3.COMPARATORLOOSE]:re$3[t$3.COMPARATOR],t=e.match(r);if(!t)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==t[1]?t[1]:\"\",\"=\"===this.operator&&(this.operator=\"\"),t[2]?this.semver=new SemVer(t[2],this.options.loose):this.semver=ANY}toString(){return this.value}test(e){if(debug_1(\"Comparator.test\",e,this.options.loose),this.semver===ANY||e===ANY)return!0;if(\"string\"==typeof e)try{e=new SemVer(e,this.options)}catch(e){return!1}return cmp_1(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Comparator))throw new TypeError(\"a Comparator is required\");if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),\"\"===this.operator)return\"\"===this.value||new Range(e.value,r).test(this.value);if(\"\"===e.operator)return\"\"===e.value||new Range(this.value,r).test(e.semver);const t=!(\">=\"!==this.operator&&\">\"!==this.operator||\">=\"!==e.operator&&\">\"!==e.operator),s=!(\"<=\"!==this.operator&&\"<\"!==this.operator||\"<=\"!==e.operator&&\"<\"!==e.operator),i=this.semver.version===e.semver.version,o=!(\">=\"!==this.operator&&\"<=\"!==this.operator||\">=\"!==e.operator&&\"<=\"!==e.operator),a=cmp_1(this.semver,\"<\",e.semver,r)&&(\">=\"===this.operator||\">\"===this.operator)&&(\"<=\"===e.operator||\"<\"===e.operator),n=cmp_1(this.semver,\">\",e.semver,r)&&(\"<=\"===this.operator||\"<\"===this.operator)&&(\">=\"===e.operator||\">\"===e.operator);return t||s||i&&o||a||n}}const{re:re$3,t:t$3}=re_1;class Range{constructor(e,r){if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof Range)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Range(e.raw,r);if(e instanceof Comparator)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\\s*\\|\\|\\s*/).map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(\" \").trim()).join(\"||\").trim(),this.range}toString(){return this.range}parseRange(e){const{loose:r}=this.options;e=e.trim();const t=r?re$2[t$2.HYPHENRANGELOOSE]:re$2[t$2.HYPHENRANGE];e=e.replace(t,hyphenReplace(this.options.includePrerelease)),debug_1(\"hyphen replace\",e),e=e.replace(re$2[t$2.COMPARATORTRIM],comparatorTrimReplace),debug_1(\"comparator trim\",e,re$2[t$2.COMPARATORTRIM]),e=(e=(e=e.replace(re$2[t$2.TILDETRIM],tildeTrimReplace)).replace(re$2[t$2.CARETTRIM],caretTrimReplace)).split(/\\s+/).join(\" \");const s=r?re$2[t$2.COMPARATORLOOSE]:re$2[t$2.COMPARATOR];return e.split(\" \").map(e=>parseComparator(e,this.options)).join(\" \").split(/\\s+/).map(e=>replaceGTE0(e,this.options)).filter(this.options.loose?e=>!!e.match(s):()=>!0).map(e=>new Comparator(e,this.options))}intersects(e,r){if(!(e instanceof Range))throw new TypeError(\"a Range is required\");return this.set.some(t=>isSatisfiable(t,r)&&e.set.some(e=>isSatisfiable(e,r)&&t.every(t=>e.every(e=>t.intersects(e,r)))))}test(e){if(!e)return!1;if(\"string\"==typeof e)try{e=new SemVer(e,this.options)}catch(e){return!1}for(let r=0;r<this.set.length;r++)if(testSet(this.set[r],e,this.options))return!0;return!1}}const{re:re$2,t:t$2,comparatorTrimReplace:comparatorTrimReplace,tildeTrimReplace:tildeTrimReplace,caretTrimReplace:caretTrimReplace}=re_1,isSatisfiable=(e,r)=>{let t=!0;const s=e.slice();let i=s.pop();for(;t&&s.length;)t=s.every(e=>i.intersects(e,r)),i=s.pop();return t},parseComparator=(e,r)=>(debug_1(\"comp\",e,r),e=replaceCarets(e,r),debug_1(\"caret\",e),e=replaceTildes(e,r),debug_1(\"tildes\",e),e=replaceXRanges(e,r),debug_1(\"xrange\",e),e=replaceStars(e,r),debug_1(\"stars\",e),e),isX=e=>!e||\"x\"===e.toLowerCase()||\"*\"===e,replaceTildes=(e,r)=>e.trim().split(/\\s+/).map(e=>replaceTilde(e,r)).join(\" \"),replaceTilde=(e,r)=>{const t=r.loose?re$2[t$2.TILDELOOSE]:re$2[t$2.TILDE];return e.replace(t,(r,t,s,i,o)=>{let a;return debug_1(\"tilde\",e,r,t,s,i,o),isX(t)?a=\"\":isX(s)?a=`>=${t}.0.0 <${+t+1}.0.0-0`:isX(i)?a=`>=${t}.${s}.0 <${t}.${+s+1}.0-0`:o?(debug_1(\"replaceTilde pr\",o),a=`>=${t}.${s}.${i}-${o} <${t}.${+s+1}.0-0`):a=`>=${t}.${s}.${i} <${t}.${+s+1}.0-0`,debug_1(\"tilde return\",a),a})},replaceCarets=(e,r)=>e.trim().split(/\\s+/).map(e=>replaceCaret(e,r)).join(\" \"),replaceCaret=(e,r)=>{debug_1(\"caret\",e,r);const t=r.loose?re$2[t$2.CARETLOOSE]:re$2[t$2.CARET],s=r.includePrerelease?\"-0\":\"\";return e.replace(t,(r,t,i,o,a)=>{let n;return debug_1(\"caret\",e,r,t,i,o,a),isX(t)?n=\"\":isX(i)?n=`>=${t}.0.0${s} <${+t+1}.0.0-0`:isX(o)?n=\"0\"===t?`>=${t}.${i}.0${s} <${t}.${+i+1}.0-0`:`>=${t}.${i}.0${s} <${+t+1}.0.0-0`:a?(debug_1(\"replaceCaret pr\",a),n=\"0\"===t?\"0\"===i?`>=${t}.${i}.${o}-${a} <${t}.${i}.${+o+1}-0`:`>=${t}.${i}.${o}-${a} <${t}.${+i+1}.0-0`:`>=${t}.${i}.${o}-${a} <${+t+1}.0.0-0`):(debug_1(\"no pr\"),n=\"0\"===t?\"0\"===i?`>=${t}.${i}.${o}${s} <${t}.${i}.${+o+1}-0`:`>=${t}.${i}.${o}${s} <${t}.${+i+1}.0-0`:`>=${t}.${i}.${o} <${+t+1}.0.0-0`),debug_1(\"caret return\",n),n})},replaceXRanges=(e,r)=>(debug_1(\"replaceXRanges\",e,r),e.split(/\\s+/).map(e=>replaceXRange(e,r)).join(\" \")),replaceXRange=(e,r)=>{e=e.trim();const t=r.loose?re$2[t$2.XRANGELOOSE]:re$2[t$2.XRANGE];return e.replace(t,(t,s,i,o,a,n)=>{debug_1(\"xRange\",e,t,s,i,o,a,n);const E=isX(i),p=E||isX(o),l=p||isX(a),c=l;return\"=\"===s&&c&&(s=\"\"),n=r.includePrerelease?\"-0\":\"\",E?t=\">\"===s||\"<\"===s?\"<0.0.0-0\":\"*\":s&&c?(p&&(o=0),a=0,\">\"===s?(s=\">=\",p?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):\"<=\"===s&&(s=\"<\",p?i=+i+1:o=+o+1),\"<\"===s&&(n=\"-0\"),t=`${s+i}.${o}.${a}${n}`):p?t=`>=${i}.0.0${n} <${+i+1}.0.0-0`:l&&(t=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`),debug_1(\"xRange return\",t),t})},replaceStars=(e,r)=>(debug_1(\"replaceStars\",e,r),e.trim().replace(re$2[t$2.STAR],\"\")),replaceGTE0=(e,r)=>(debug_1(\"replaceGTE0\",e,r),e.trim().replace(re$2[r.includePrerelease?t$2.GTE0PRE:t$2.GTE0],\"\")),hyphenReplace=e=>(r,t,s,i,o,a,n,E,p,l,c,$,h)=>`${t=isX(s)?\"\":isX(i)?`>=${s}.0.0${e?\"-0\":\"\"}`:isX(o)?`>=${s}.${i}.0${e?\"-0\":\"\"}`:a?`>=${t}`:`>=${t}${e?\"-0\":\"\"}`} ${E=isX(p)?\"\":isX(l)?`<${+p+1}.0.0-0`:isX(c)?`<${p}.${+l+1}.0-0`:$?`<=${p}.${l}.${c}-${$}`:e?`<${p}.${l}.${+c+1}-0`:`<=${E}`}`.trim(),testSet=(e,r,t)=>{for(let t=0;t<e.length;t++)if(!e[t].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let t=0;t<e.length;t++)if(debug_1(e[t].semver),e[t].semver!==Comparator.ANY&&e[t].semver.prerelease.length>0){const s=e[t].semver;if(s.major===r.major&&s.minor===r.minor&&s.patch===r.patch)return!0}return!1}return!0};export const satisfies=(e,r,t)=>{try{r=new Range(r,t)}catch(e){return!1}return r.test(e)};const satisfies_1=satisfies,{MAX_LENGTH:MAX_LENGTH}=constants,{re:re$1,t:t$1}=re_1,parse=(e,r)=>{if(r&&\"object\"==typeof r||(r={loose:!!r,includePrerelease:!1}),e instanceof SemVer)return e;if(\"string\"!=typeof e)return null;if(e.length>MAX_LENGTH)return null;if(!(r.loose?re$1[t$1.LOOSE]:re$1[t$1.FULL]).test(e))return null;try{return new SemVer(e,r)}catch(e){return null}},parse_1=parse,{re:re,t:t}=re_1;export const coerce=(e,r)=>{if(e instanceof SemVer)return e;if(\"number\"==typeof e&&(e=String(e)),\"string\"!=typeof e)return null;let s=null;if((r=r||{}).rtl){let r;for(;(r=re[t.COERCERTL].exec(e))&&(!s||s.index+s[0].length!==e.length);)s&&r.index+r[0].length===s.index+s[0].length||(s=r),re[t.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;re[t.COERCERTL].lastIndex=-1}else s=e.match(re[t.COERCE]);return null===s?null:parse_1(`${s[2]}.${s[3]||\"0\"}.${s[4]||\"0\"}`,r)};\n","function percentToByte(p: string) {\n  return String.fromCharCode(parseInt(p.slice(1), 16));\n}\n\nfunction byteToPercent(b: string) {\n  return `%${`00${b.charCodeAt(0).toString(16)}`.slice(-2)}`;\n}\n\n/**\n * Encodes a Base64 string. Safe for UTF-8 characters.\n * Original source is from the `universal-base64` NPM package.\n *\n * @source https://github.com/blakeembrey/universal-base64/blob/master/src/browser.ts\n */\nfunction btoaUTF8(str: string): string {\n  return btoa(encodeURIComponent(str).replace(/%[0-9A-F]{2}/g, percentToByte));\n}\n\n/**\n * Decodes a Base64 string. Safe for UTF-8 characters.\n * Original source is from the `universal-base64` NPM package.\n *\n * @source https://github.com/blakeembrey/universal-base64/blob/master/src/browser.ts\n */\nfunction atobUTF8(str: string): string {\n  return decodeURIComponent(Array.from(atob(str), byteToPercent).join(''));\n}\n\n/**\n * Given a JSON-serializable object, encode as a Base64 string.\n */\nexport function encodeJSON<T>(options: T): string {\n  return btoaUTF8(JSON.stringify(options));\n}\n\n/**\n * Given a Base64 JSON string, decode a JavaScript object.\n */\nexport function decodeJSON<T>(queryString: string): T {\n  return JSON.parse(atobUTF8(queryString));\n}\n","import { JsonRpcError, RPCErrorCode, SDKErrorCode, SDKWarningCode } from '@magic-sdk/types';\nimport { isJsonRpcErrorCode } from '../util/type-guards';\nimport { SDKEnvironment } from './sdk-environment';\nimport { Extension } from '../modules/base-extension';\n\n// --- Error/warning classes\n\n/**\n * This error type represents internal SDK errors. This could be developer\n * mistakes (or Magic's mistakes), or execution errors unrelated to standard\n * JavaScript exceptions.\n */\nexport class MagicSDKError extends Error {\n  __proto__ = Error;\n\n  constructor(public code: SDKErrorCode, public rawMessage: string) {\n    super(`Magic SDK Error: [${code}] ${rawMessage}`);\n    Object.setPrototypeOf(this, MagicSDKError.prototype);\n  }\n}\n\n/**\n * This error type communicates exceptions that occur during execution in the\n * Magic `<iframe>` context.\n */\nexport class MagicRPCError extends Error {\n  __proto__ = Error;\n\n  public code: RPCErrorCode | number;\n  public rawMessage: string;\n\n  constructor(sourceError?: JsonRpcError | null) {\n    super();\n\n    const codeNormalized = Number(sourceError?.code);\n    this.rawMessage = sourceError?.message || 'Internal error';\n    this.code = isJsonRpcErrorCode(codeNormalized) ? codeNormalized : RPCErrorCode.InternalError;\n    this.message = `Magic RPC Error: [${this.code}] ${this.rawMessage}`;\n\n    Object.setPrototypeOf(this, MagicRPCError.prototype);\n  }\n}\n\n/**\n * In contrast to `SDKError` objects, this \"warning\" type communicates important\n * context that does not rise to the level of an exception. These should be\n * logged rather than thrown.\n */\nexport class MagicSDKWarning {\n  public message: string;\n\n  constructor(public code: SDKWarningCode, public rawMessage: string) {\n    this.message = `Magic SDK Warning: [${code}] ${rawMessage}`;\n  }\n\n  /**\n   * Logs this warning to the console.\n   */\n  public log() {\n    console.warn(this.message);\n  }\n}\n\n/**\n * This error type is reserved for communicating errors that arise during\n * execution of Magic SDK Extension methods. Compare this to the `SDKError`\n * type, specifically in context of Extensions.\n */\nexport class MagicExtensionError<TData = any> extends Error {\n  __proto__ = Error;\n\n  constructor(ext: Extension<string>, public code: string | number, public rawMessage: string, public data: TData) {\n    super(`Magic Extension Error (${ext.name}): [${code}] ${rawMessage}`);\n    Object.setPrototypeOf(this, MagicExtensionError.prototype);\n  }\n}\n\n/**\n * In contrast to `MagicExtensionError` objects, this \"warning\" type\n * communicates important context that does not rise to the level of an\n * exception. These should be logged rather than thrown.\n */\nexport class MagicExtensionWarning {\n  public message: string;\n\n  constructor(ext: Extension<string>, public code: string | number, public rawMessage: string) {\n    this.message = `Magic Extension Warning (${ext.name}): [${code}] ${rawMessage}`;\n  }\n\n  /**\n   * Logs this warning to the console.\n   */\n  public log() {\n    console.warn(this.message);\n  }\n}\n\n// --- SDK error factories\n\nexport function createMissingApiKeyError() {\n  return new MagicSDKError(\n    SDKErrorCode.MissingApiKey,\n    'Please provide an API key that you acquired from the Magic developer dashboard.',\n  );\n}\n\nexport function createModalNotReadyError() {\n  return new MagicSDKError(SDKErrorCode.ModalNotReady, 'Modal is not ready.');\n}\n\nexport function createMalformedResponseError() {\n  return new MagicSDKError(SDKErrorCode.MalformedResponse, 'Response from the Magic iframe is malformed.');\n}\n\nexport function createExtensionNotInitializedError(member: string) {\n  return new MagicSDKError(\n    SDKErrorCode.ExtensionNotInitialized,\n    `Extensions must be initialized with a Magic SDK instance before \\`Extension.${member}\\` can be accessed. Do not invoke \\`Extension.${member}\\` inside an extension constructor.`,\n  );\n}\n\nexport function createIncompatibleExtensionsError(extensions: Extension<string>[]) {\n  let msg = `Some extensions are incompatible with \\`${SDKEnvironment.sdkName}@${SDKEnvironment.version}\\`:`;\n\n  extensions\n    .filter((ext) => typeof ext.compat !== 'undefined' && ext.compat !== null)\n    .forEach((ext) => {\n      const compat = ext.compat![SDKEnvironment.sdkName];\n\n      /* istanbul ignore else */\n      if (typeof compat === 'string') {\n        msg += `\\n  - Extension \\`${ext.name}\\` supports version(s) \\`${compat}\\``;\n      } else if (!compat) {\n        msg += `\\n  - Extension \\`${ext.name}\\` does not support ${SDKEnvironment.platform} environments.`;\n      }\n\n      // Else case is irrelevant here here\n      // (we filter out extensions with missing `compat` field)\n    });\n\n  return new MagicSDKError(SDKErrorCode.IncompatibleExtensions, msg);\n}\n\nexport function createInvalidArgumentError(options: {\n  procedure: string;\n  argument: number;\n  expected: string;\n  received: string;\n}) {\n  /**\n   * Parses the argument index (given by `argument`) to attach the correct ordinal suffix.\n   * (i.e.: 1st, 2nd, 3rd, 4th, etc.)\n   */\n  const ordinalSuffix = (i: number) => {\n    const iAdjusted = i + 1; // Argument is zero-indexed.\n    const j = iAdjusted % 10;\n    const k = iAdjusted % 100;\n    if (j === 1 && k !== 11) return `${iAdjusted}st`;\n    if (j === 2 && k !== 12) return `${iAdjusted}nd`;\n    if (j === 3 && k !== 13) return `${iAdjusted}rd`;\n    return `${iAdjusted}th`;\n  };\n\n  return new MagicSDKError(\n    SDKErrorCode.InvalidArgument,\n    `Invalid ${ordinalSuffix(options.argument)} argument given to \\`${options.procedure}\\`.\\n` +\n      `  Expected: \\`${options.expected}\\`\\n` +\n      `  Received: \\`${options.received}\\``,\n  );\n}\n\n// --- SDK warning factories\n\nexport function createDuplicateIframeWarning() {\n  return new MagicSDKWarning(SDKWarningCode.DuplicateIframe, 'Duplicate iframes found.');\n}\n\nexport function createSynchronousWeb3MethodWarning() {\n  return new MagicSDKWarning(\n    SDKWarningCode.SyncWeb3Method,\n    'Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.',\n  );\n}\n\nexport function createReactNativeEndpointConfigurationWarning() {\n  return new MagicSDKWarning(\n    SDKWarningCode.ReactNativeEndpointConfiguration,\n    `CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \\`endpoint\\` parameter SHOULD NOT be provided. The Magic \\`<iframe>\\` is automatically wrapped by a WebView pointed at \\`${SDKEnvironment.defaultEndpoint}\\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`,\n  );\n}\n\nexport function createDeprecationWarning(options: {\n  method: string;\n  removalVersions: { [P in 'magic-sdk' | '@magic-sdk/react-native']: string };\n  useInstead?: string;\n}) {\n  const { method, removalVersions, useInstead } = options;\n\n  const removalVersion = removalVersions[SDKEnvironment.sdkName];\n  const useInsteadSuffix = useInstead ? ` Use \\`${useInstead}\\` instead.` : '';\n  const message = `\\`${method}\\` will be removed from \\`${SDKEnvironment.sdkName}\\` in version \\`${removalVersion}\\`.${useInsteadSuffix}`;\n\n  return new MagicSDKWarning(SDKWarningCode.DeprecationNotice, message);\n}\n","/**\n * This file contains our type guards.\n *\n * Type guards are a feature of TypeScript which narrow the type signature of\n * intesection types (types that can be one thing or another).\n *\n * @see\n * https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-guards-and-differentiating-types\n */\n\nimport { JsonRpcRequestPayload, JsonRpcResponsePayload, MagicPayloadMethod, RPCErrorCode } from '@magic-sdk/types';\n\n/**\n * Assert `value` is `undefined`.\n */\nfunction isUndefined(value: any): value is undefined {\n  return typeof value === 'undefined';\n}\n\n/**\n * Assert `value` is `null`.\n */\nfunction isNull(value: any): value is null {\n  return value === null;\n}\n\n/**\n * Assert `value` is `null` or `undefined`.\n */\nfunction isNil(value: any): value is null | undefined {\n  return isNull(value) || isUndefined(value);\n}\n\n/**\n * Assert `value` is a `JsonRpcRequestPayload` object.\n */\nexport function isJsonRpcRequestPayload(value?: JsonRpcRequestPayload): value is JsonRpcRequestPayload {\n  if (isNil(value)) return false;\n  return (\n    !isUndefined(value.jsonrpc) && !isUndefined(value.id) && !isUndefined(value.method) && !isUndefined(value.params)\n  );\n}\n\n/**\n * Assert `value` is a `JsonRpcResponsePayload` object.\n */\nexport function isJsonRpcResponsePayload(value: any): value is JsonRpcResponsePayload {\n  if (isNil(value)) return false;\n  return (\n    !isUndefined(value.jsonrpc) && !isUndefined(value.id) && (!isUndefined(value.result) || !isUndefined(value.error))\n  );\n}\n\n/**\n * Assert `value` is a Magic SDK payload method identifier.\n */\nexport function isMagicPayloadMethod(value?: any): value is MagicPayloadMethod {\n  if (isNil(value)) return false;\n  return typeof value === 'string' && Object.values(MagicPayloadMethod).includes(value as any);\n}\n\n/**\n * Assert `value` is an expected JSON RPC error code.\n */\nexport function isJsonRpcErrorCode(value?: any): value is RPCErrorCode {\n  if (isNil(value)) return false;\n  return typeof value === 'number' && Object.values(RPCErrorCode).includes(value);\n}\n\n/**\n * Assert `value` is an empty, plain object.\n */\nexport function isEmpty(value?: any): value is {} {\n  if (!value) return true;\n\n  for (const key in value) {\n    /* istanbul ignore else */\n    if (Object.hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import type localForage from 'localforage';\nimport type { ViewController } from './view-controller';\nimport type { SDKBase } from './sdk';\nimport type { WithExtensions } from '../modules/base-extension';\n\ntype ConstructorOf<C> = { new (...args: any[]): C };\n\n/**\n * A structure containing details about the current environment.\n * This is guaranteed to be populated before the SDK is instantiated.\n */\nexport interface SDKEnvironment {\n  sdkName: 'magic-sdk' | '@magic-sdk/react-native';\n  version: string;\n  platform: 'web' | 'react-native';\n  defaultEndpoint: string;\n  ViewController: ConstructorOf<ViewController>;\n  configureStorage: () => Promise<typeof localForage>;\n}\n\nexport const SDKEnvironment: SDKEnvironment = {} as any;\n\nexport function createSDK<SDK extends SDKBase>(\n  SDKBaseCtor: ConstructorOf<SDK>,\n  environment: SDKEnvironment,\n): WithExtensions<SDK> {\n  Object.assign(SDKEnvironment, environment);\n  return SDKBaseCtor as any;\n}\n\nexport const sdkNameToEnvName = {\n  'magic-sdk': 'magic-sdk' as const,\n  '@magic-sdk/react-native': 'magic-sdk-rn' as const,\n};\n","import {\n  MagicPayloadMethod,\n  LoginWithMagicLinkConfiguration,\n  LoginWithSmsConfiguration,\n  LoginWithEmailOTPConfiguration,\n} from '@magic-sdk/types';\nimport { BaseModule } from './base-module';\nimport { createJsonRpcRequestPayload } from '../core/json-rpc';\nimport { SDKEnvironment } from '../core/sdk-environment';\n\ntype LoginWithMagicLinkEvents = {\n  'email-sent': () => void;\n  'email-not-deliverable': () => void;\n  retry: () => void;\n};\n\nexport class AuthModule extends BaseModule {\n  /**\n   * Initiate the \"magic link\" login flow for a user. If the flow is successful,\n   * this method will return a Decentralized ID token (with a default lifespan\n   * of 15 minutes).\n   */\n  public loginWithMagicLink(configuration: LoginWithMagicLinkConfiguration) {\n    const { email, showUI = true, redirectURI } = configuration;\n\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LoginWithMagicLinkTestMode : MagicPayloadMethod.LoginWithMagicLink,\n      [{ email, showUI, redirectURI }],\n    );\n    return this.request<string | null, LoginWithMagicLinkEvents>(requestPayload);\n  }\n\n  /**\n   * Initiate an SMS login flow for a user. If successful,\n   * this method will return a Decenteralized ID token (with a default lifespan\n   * of 15 minutes)\n   */\n  public loginWithSMS(configuration: LoginWithSmsConfiguration) {\n    const { phoneNumber } = configuration;\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LoginWithSmsTestMode : MagicPayloadMethod.LoginWithSms,\n      [{ phoneNumber, showUI: true }],\n    );\n    return this.request<string | null>(requestPayload);\n  }\n\n  /**\n   * Initiate an Email with OTP login flow for a user. If successful,\n   * this method will return a Decenteralized ID token (with a default lifespan\n   * of 15 minutes)\n   */\n  public loginWithEmailOTP(configuration: LoginWithEmailOTPConfiguration) {\n    const { email } = configuration;\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LoginWithEmailOTPTestMode : MagicPayloadMethod.LoginWithEmailOTP,\n      [{ email, showUI: true }],\n    );\n    return this.request<string | null>(requestPayload);\n  }\n\n  /**\n   * Log a user in with a special one-time-use credential token. This is\n   * currently used during magic link flows with a configured redirect to\n   * hydrate the user session at the end of the flow. If the flow is successful,\n   * this method will return a Decentralized ID token (with a default lifespan\n   * of 15 minutes).\n   *\n   * If no argument is provided, a credential is automatically parsed from\n   * `window.location.search`.\n   */\n  public loginWithCredential(credentialOrQueryString?: string) {\n    let credentialResolved = credentialOrQueryString ?? '';\n\n    if (!credentialOrQueryString && SDKEnvironment.platform === 'web') {\n      credentialResolved = window.location.search;\n\n      // Remove the query from the redirect callback as a precaution.\n      const urlWithoutQuery = window.location.origin + window.location.pathname;\n      window.history.replaceState(null, '', urlWithoutQuery);\n    }\n\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LoginWithCredentialTestMode : MagicPayloadMethod.LoginWithCredential,\n      [credentialResolved],\n    );\n\n    return this.request<string | null>(requestPayload);\n  }\n}\n","import { JsonRpcRequestPayload, MagicOutgoingWindowMessage, MagicIncomingWindowMessage } from '@magic-sdk/types';\nimport { createMalformedResponseError, MagicRPCError } from '../core/sdk-exceptions';\nimport type { SDKBase } from '../core/sdk';\nimport { standardizeJsonRpcRequestPayload } from '../core/json-rpc';\nimport { createPromiEvent } from '../util/promise-tools';\nimport type { ViewController } from '../core/view-controller';\nimport type { EventsDefinition } from '../util/events';\n\nexport class BaseModule {\n  constructor(protected sdk: SDKBase) {}\n\n  /**\n   * The `ViewController` for the SDK instance registered to this module.\n   */\n  protected get overlay(): ViewController {\n    return (this.sdk as any).overlay;\n  }\n\n  /**\n   * Emits promisified requests to the Magic `<iframe>` context.\n   */\n  protected request<ResultType = any, Events extends EventsDefinition = void>(payload: Partial<JsonRpcRequestPayload>) {\n    const responsePromise = this.overlay.post<ResultType>(\n      MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,\n      standardizeJsonRpcRequestPayload(payload),\n    );\n\n    // PromiEvent-ify the response.\n    const promiEvent = createPromiEvent<ResultType, Events>((resolve, reject) => {\n      responsePromise\n        .then((res) => {\n          cleanupEvents();\n          if (res.hasError) reject(new MagicRPCError(res.payload.error));\n          else if (res.hasResult) resolve(res.payload.result as ResultType);\n          else throw createMalformedResponseError();\n        })\n        .catch((err) => {\n          cleanupEvents();\n          reject(err);\n        });\n    });\n\n    // Listen for events from the `<iframe>` associated with the current payload\n    // and emit those to `PromiEvent` subscribers.\n    const cleanupEvents = this.overlay.on(MagicIncomingWindowMessage.MAGIC_HANDLE_EVENT, (evt) => {\n      const { response } = evt.data;\n\n      if (response.id === payload.id && response.result?.event) {\n        const { event, params = [] } = response.result;\n        promiEvent.emit(event, ...params);\n      }\n    });\n\n    return promiEvent;\n  }\n}\n","function* createIntGenerator(): Generator<number, number, void> {\n  let index = 0;\n\n  while (true) {\n    /* istanbul ignore next */\n    if (index < Number.MAX_SAFE_INTEGER) yield ++index;\n    else index = 0;\n  }\n}\n\nconst intGenerator = createIntGenerator();\n\n/**\n * Get an integer ID for attaching to a JSON RPC request payload.\n */\nexport function getPayloadId(): number {\n  return intGenerator.next().value;\n}\n","/* eslint-disable no-param-reassign */\n\nimport { JsonRpcRequestPayload, JsonRpcResponsePayload, JsonRpcError } from '@magic-sdk/types';\nimport { isJsonRpcResponsePayload } from '../util/type-guards';\nimport { getPayloadId } from '../util/get-payload-id';\n\nconst payloadPreprocessedSymbol = Symbol('Payload pre-processed by Magic SDK');\n\n/**\n * To avoid \"pre-processing\" a payload more than once (and needlessly\n * incrementing our payload ID generator), we attach a symbol to detect a\n * payloads we've already visited.\n */\nfunction markPayloadAsPreprocessed<T extends Partial<JsonRpcRequestPayload>>(payload: T): T {\n  Object.defineProperty(payload, payloadPreprocessedSymbol, {\n    value: true,\n    enumerable: false,\n  });\n\n  return payload;\n}\n\n/**\n * Returns `true` if the payload has been visited by our \"pre-processing,\" in\n * `standardizeJsonRpcRequestPayload(...)`.\n */\nfunction isPayloadPreprocessed<T extends Partial<JsonRpcRequestPayload>>(payload: T) {\n  return !!(payload as any)[payloadPreprocessedSymbol];\n}\n\n/**\n * Returns a full `JsonRpcRequestPayload` from a potentially incomplete payload\n * object. This method mutates the given `payload` to preserve compatibility\n * with external libraries that perform their own `JsonRpcRequestPayload.id`\n * check to associate responses (such as `web3`).\n *\n * This function is no-op if the payload has already been processed before.\n */\nexport function standardizeJsonRpcRequestPayload(payload: Partial<JsonRpcRequestPayload>) {\n  if (!isPayloadPreprocessed(payload)) {\n    payload.jsonrpc = payload.jsonrpc ?? '2.0';\n    payload.id = getPayloadId();\n    payload.method = payload.method ?? 'noop';\n    payload.params = payload.params ?? [];\n\n    markPayloadAsPreprocessed(payload);\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion */\n  return payload as JsonRpcRequestPayload;\n}\n\n/**\n * Build a valid JSON RPC payload for emitting to the Magic SDK iframe relayer.\n */\nexport function createJsonRpcRequestPayload(method: string, params: any[] = []): JsonRpcRequestPayload {\n  return markPayloadAsPreprocessed({\n    params,\n    method,\n    jsonrpc: '2.0',\n    id: getPayloadId(),\n  });\n}\n\n/**\n * Formats and standardizes a JSON RPC 2.0 response from a number of potential\n * sources.\n */\nexport class JsonRpcResponse<ResultType = any> {\n  private readonly _jsonrpc: string;\n  private readonly _id: string | number | null;\n  private _result?: ResultType | null;\n  private _error?: JsonRpcError | null;\n\n  constructor(responsePayload: JsonRpcResponsePayload);\n  constructor(response: JsonRpcResponse<ResultType>);\n  constructor(requestPayload: JsonRpcRequestPayload);\n  constructor(responseOrPayload: JsonRpcResponsePayload | JsonRpcResponse<ResultType> | JsonRpcRequestPayload) {\n    if (responseOrPayload instanceof JsonRpcResponse) {\n      this._jsonrpc = responseOrPayload.payload.jsonrpc;\n      this._id = responseOrPayload.payload.id;\n      this._result = responseOrPayload.payload.result;\n      this._error = responseOrPayload.payload.error;\n    } else if (isJsonRpcResponsePayload(responseOrPayload)) {\n      this._jsonrpc = responseOrPayload.jsonrpc;\n      this._id = responseOrPayload.id;\n      this._result = responseOrPayload.result;\n      this._error = responseOrPayload.error;\n    } else {\n      this._jsonrpc = responseOrPayload.jsonrpc;\n      this._id = responseOrPayload.id;\n      this._result = undefined;\n      this._error = undefined;\n    }\n  }\n\n  public applyError(error?: JsonRpcError | null) {\n    this._error = error;\n    return this;\n  }\n\n  public applyResult(result?: ResultType | null) {\n    this._result = result;\n    return this;\n  }\n\n  public get hasError() {\n    return typeof this._error !== 'undefined' && this._error !== null;\n  }\n\n  public get hasResult() {\n    return typeof this._result !== 'undefined';\n  }\n\n  public get payload(): JsonRpcResponsePayload {\n    return {\n      jsonrpc: this._jsonrpc,\n      id: this._id,\n      result: this._result,\n      error: this._error,\n    };\n  }\n}\n","import EventEmitter from 'eventemitter3';\n\nexport type EventsDefinition = { [K in string | symbol]: (...args: any[]) => void } | void;\n\n/**\n * An extension of `EventEmitter` (provided by `eventemitter3`) with an adjusted\n * type interface that supports the unique structure of Magic SDK modules.\n */\nexport class TypedEmitter<Events extends EventsDefinition = void> extends EventEmitter<\n  Events extends void ? string | symbol : Events\n> {}\n\ntype ChainingMethods = 'on' | 'once' | 'addListener' | 'off' | 'removeListener' | 'removeAllListeners';\ntype NonChainingMethods = 'emit' | 'eventNames' | 'listeners' | 'listenerCount';\n\ntype ReplaceReturnType<T extends (...a: any) => any, TNewReturn> = (...a: Parameters<T>) => TNewReturn;\n\n/**\n * Creates a `TypedEmitter` instance and returns helper functions for easily\n * mixing `TypedEmitter` methods into other objects.\n */\nexport function createTypedEmitter<Events extends EventsDefinition = void>() {\n  const emitter = new TypedEmitter<Events>();\n\n  const createChainingEmitterMethod = <T1 extends ChainingMethods, T2>(\n    method: T1,\n    source: T2,\n  ): ReplaceReturnType<TypedEmitter[T1], T2> => {\n    return (...args: any[]) => {\n      (emitter as any)[method].apply(emitter, args);\n      return source;\n    };\n  };\n\n  const createBoundEmitterMethod = <T extends NonChainingMethods>(method: T): TypedEmitter[T] => {\n    return (...args: any[]) => {\n      return (emitter as any)[method].apply(emitter, args);\n    };\n  };\n\n  return {\n    emitter,\n    createChainingEmitterMethod,\n    createBoundEmitterMethod,\n  };\n}\n","import { TypedEmitter, EventsDefinition, createTypedEmitter } from './events';\n\n/**\n * Extends `Promise` with a polymorphic `this` type to accomodate arbitrary\n * `Promise` API extensions.\n */\ninterface ExtendedPromise<T> extends Promise<T> {\n  then<TResult1 = T, TResult2 = never>(\n    onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null,\n  ): ExtendedPromise<TResult1 | TResult2> & this;\n\n  catch<TResult = never>(\n    onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null,\n  ): ExtendedPromise<T | TResult> & this;\n\n  finally(onfinally?: (() => void) | undefined | null): ExtendedPromise<T> & this;\n}\n\n/**\n * A `Promise` and `EventEmitter` all in one!\n */\nexport type PromiEvent<TResult, TEvents extends EventsDefinition = void> = ExtendedPromise<TResult> &\n  TypedEmitter<TEvents extends void ? DefaultEvents<TResult> : TEvents & DefaultEvents<TResult>>;\n\n/**\n * Default events attached to every `PromiEvent`.\n */\ntype DefaultEvents<TResult> = {\n  done: (result: TResult) => void;\n  error: (reason: any) => void;\n  settled: () => void;\n};\n\n/**\n * A `Promise` executor with can be optionally asynchronous.\n */\ntype AsyncPromiseExecutor<TResult> = (\n  resolve: (value: TResult | PromiseLike<TResult>) => void,\n  reject: (reason?: any) => void,\n) => void | Promise<void>;\n\nconst promiEventBrand = Symbol('isPromiEvent');\n\n/**\n * Returns `true` if the given `value` is a `PromiEvent`.\n */\nexport function isPromiEvent(value: any): value is PromiEvent<any> {\n  return !!value[promiEventBrand];\n}\n\n/**\n * Create a native JavaScript `Promise` overloaded with strongly-typed methods\n * from `EventEmitter`.\n */\nexport function createPromiEvent<TResult, TEvents extends EventsDefinition = void>(\n  executor: AsyncPromiseExecutor<TResult>,\n): PromiEvent<TResult, TEvents extends void ? DefaultEvents<TResult> : TEvents & DefaultEvents<TResult>> {\n  const promise = createPromise(executor);\n  const { createBoundEmitterMethod, createChainingEmitterMethod } = createTypedEmitter<\n    TEvents & DefaultEvents<TResult>\n  >();\n\n  // We save the original `Promise` methods to the following symbols so we can\n  // access them internally.\n  const thenSymbol = Symbol('Promise.then');\n  const catchSymbol = Symbol('Promise.catch');\n  const finallySymbol = Symbol('Promise.finally');\n\n  /**\n   * Ensures the next object in the `PromiEvent` chain is overloaded with\n   * `EventEmitter` methods.\n   */\n  const createChainingPromiseMethod =\n    (method: typeof thenSymbol | typeof catchSymbol | typeof finallySymbol, source: Promise<any>) =>\n    (...args: any[]) => {\n      const nextPromise = (source as any)[method].apply(source, args);\n      return promiEvent(nextPromise);\n    };\n\n  /**\n   * Builds a `PromiEvent` by assigning `EventEmitter` methods to a native\n   * `Promise` object.\n   */\n  const promiEvent = (source: any) => {\n    return Object.assign(source, {\n      [promiEventBrand]: true,\n\n      [thenSymbol]: source[thenSymbol] || source.then,\n      [catchSymbol]: source[catchSymbol] || source.catch,\n      [finallySymbol]: source[finallySymbol] || source.finally,\n\n      then: createChainingPromiseMethod(thenSymbol, source),\n      catch: createChainingPromiseMethod(catchSymbol, source),\n      finally: createChainingPromiseMethod(finallySymbol, source),\n\n      on: createChainingEmitterMethod('on', source),\n      once: createChainingEmitterMethod('once', source),\n      addListener: createChainingEmitterMethod('addListener', source),\n\n      off: createChainingEmitterMethod('off', source),\n      removeListener: createChainingEmitterMethod('removeListener', source),\n      removeAllListeners: createChainingEmitterMethod('removeAllListeners', source),\n\n      emit: createBoundEmitterMethod('emit'),\n      eventNames: createBoundEmitterMethod('eventNames'),\n      listeners: createBoundEmitterMethod('listeners'),\n      listenerCount: createBoundEmitterMethod('listenerCount'),\n    });\n  };\n\n  const result = promiEvent(\n    promise.then(\n      (resolved) => {\n        // Emit default completion events and resolve result.\n        result.emit('done', resolved);\n        result.emit('settled');\n        return resolved;\n      },\n\n      (err) => {\n        // Emit default error events and re-throw.\n        result.emit('error', err);\n        result.emit('settled');\n        throw err;\n      },\n    ),\n  );\n\n  return result;\n}\n\n/**\n * Creates a `Promise` with an **async executor** that automatically catches\n * errors occurring within the executor. Nesting promises in this way is usually\n * deemed an _anti-pattern_, but it's useful and clean when promisifying the\n * event-based code that's inherent to JSON RPC.\n *\n * So, here we solve the issue of nested promises by ensuring that no errors\n * mistakenly go unhandled!\n */\nexport function createPromise<TResult>(executor: AsyncPromiseExecutor<TResult>) {\n  return new Promise<TResult>((resolve, reject) => {\n    const result = executor(resolve, reject);\n    Promise.resolve(result).catch(reject);\n  });\n}\n","import {\n  GetIdTokenConfiguration,\n  MagicPayloadMethod,\n  MagicUserMetadata,\n  GenerateIdTokenConfiguration,\n  UpdateEmailConfiguration,\n} from '@magic-sdk/types';\nimport { BaseModule } from './base-module';\nimport { createJsonRpcRequestPayload } from '../core/json-rpc';\nimport { clearKeys } from '../util/web-crypto';\n\ntype UpdateEmailEvents = {\n  'email-sent': () => void;\n  'email-not-deliverable': () => void;\n  'old-email-confirmed': () => void;\n  'new-email-confirmed': () => void;\n  retry: () => void;\n};\n\nexport class UserModule extends BaseModule {\n  /** */\n  public getIdToken(configuration?: GetIdTokenConfiguration) {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.GetIdTokenTestMode : MagicPayloadMethod.GetIdToken,\n      [configuration],\n    );\n    return this.request<string>(requestPayload);\n  }\n\n  /** */\n  public generateIdToken(configuration?: GenerateIdTokenConfiguration) {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.GenerateIdTokenTestMode : MagicPayloadMethod.GenerateIdToken,\n      [configuration],\n    );\n    return this.request<string>(requestPayload);\n  }\n\n  /** */\n  public getMetadata() {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.GetMetadataTestMode : MagicPayloadMethod.GetMetadata,\n    );\n    return this.request<MagicUserMetadata>(requestPayload);\n  }\n\n  /** */\n  public updateEmail(configuration: UpdateEmailConfiguration) {\n    const { email, showUI = true } = configuration;\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.UpdateEmailTestMode : MagicPayloadMethod.UpdateEmail,\n      [{ email, showUI }],\n    );\n    return this.request<string | null, UpdateEmailEvents>(requestPayload);\n  }\n\n  /** */\n  public isLoggedIn() {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.IsLoggedInTestMode : MagicPayloadMethod.IsLoggedIn,\n    );\n    return this.request<boolean>(requestPayload);\n  }\n\n  /** */\n  public logout() {\n    clearKeys();\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.LogoutTestMode : MagicPayloadMethod.Logout,\n    );\n    return this.request<boolean>(requestPayload);\n  }\n\n  /** */\n  public showSettings() {\n    const requestPayload = createJsonRpcRequestPayload(\n      this.sdk.testMode ? MagicPayloadMethod.UserSettingsTestMode : MagicPayloadMethod.UserSettings,\n    );\n    return this.request<MagicUserMetadata>(requestPayload);\n  }\n}\n","import { SDKEnvironment } from '../core/sdk-environment';\n\nlet lf: LocalForage;\n\n/**\n * Proxies `localforage` methods with strong-typing.\n */\nfunction proxyLocalForageMethod<TMethod extends keyof LocalForageDbMethods>(method: TMethod): LocalForage[TMethod] {\n  return async (...args: any[]) => {\n    /* istanbul ignore else */\n    if (!lf) lf = await SDKEnvironment.configureStorage();\n    await lf.ready();\n    return (lf[method] as any)(...args);\n  };\n}\n\nexport const getItem = proxyLocalForageMethod('getItem');\nexport const setItem = proxyLocalForageMethod('setItem');\nexport const removeItem = proxyLocalForageMethod('removeItem');\nexport const clear = proxyLocalForageMethod('clear');\nexport const length = proxyLocalForageMethod('length');\nexport const key = proxyLocalForageMethod('key');\nexport const keys = proxyLocalForageMethod('keys');\nexport const iterate = proxyLocalForageMethod('iterate');\n","/* eslint-disable no-bitwise */\nexport function uuid() {\n  const u = window.crypto.getRandomValues(new Uint8Array(16));\n\n  // set the version bit to v4\n  u[6] = (u[6] & 0x0f) | 0x40;\n\n  // set the variant bit to \"don't care\" (yes, the RFC\n  // calls it that)\n  u[8] = (u[8] & 0xbf) | 0x80;\n\n  // hex encode them and add the dashes\n  let uid = '';\n  uid += u[0].toString(16);\n  uid += u[1].toString(16);\n  uid += u[2].toString(16);\n  uid += u[3].toString(16);\n  uid += '-';\n\n  uid += u[4].toString(16);\n  uid += u[5].toString(16);\n  uid += '-';\n\n  uid += u[6].toString(16);\n  uid += u[7].toString(16);\n  uid += '-';\n\n  uid += u[8].toString(16);\n  uid += u[9].toString(16);\n  uid += '-';\n\n  uid += u[10].toString(16);\n  uid += u[11].toString(16);\n  uid += u[12].toString(16);\n  uid += u[13].toString(16);\n  uid += u[14].toString(16);\n  uid += u[15].toString(16);\n\n  return uid;\n}\n","import { setItem, getItem, removeItem } from './storage';\nimport { uuid } from './uuid';\n\nexport const STORE_KEY_PRIVATE_KEY = 'STORE_KEY_PRIVATE_KEY';\nexport const STORE_KEY_PUBLIC_JWK = 'STORE_KEY_PUBLIC_JWK';\nconst ALGO_NAME = 'ECDSA';\nconst ALGO_CURVE = 'P-256';\n\nconst EC_GEN_PARAMS: EcKeyGenParams = {\n  name: ALGO_NAME,\n  namedCurve: ALGO_CURVE,\n};\nconst EC_IMPORT_PARAMS: EcKeyImportParams = {\n  name: ALGO_NAME,\n  namedCurve: ALGO_CURVE,\n};\n\nexport function clearKeys() {\n  removeItem(STORE_KEY_PUBLIC_JWK);\n  removeItem(STORE_KEY_PRIVATE_KEY);\n}\n\nexport async function createJwt() {\n  // will return undefiend is webcrypto is not supported\n  const publicJwk = await getPublicKey();\n\n  if (!publicJwk) {\n    console.info('unable to create public key or webcrypto is unsupported');\n    return undefined;\n  }\n\n  const { subtle } = window.crypto;\n  const privateJwk = await getItem<CryptoKey>(STORE_KEY_PRIVATE_KEY);\n\n  if (!privateJwk || !subtle) {\n    console.info('unable to find private key or webcrypto unsupported');\n    return undefined;\n  }\n\n  const claims = {\n    iat: Math.floor(new Date().getTime() / 1000),\n    jti: uuid(),\n  };\n\n  const headers = {\n    typ: 'dpop+jwt',\n    alg: 'ES256',\n    jwk: publicJwk,\n  };\n\n  const jws = {\n    protected: strToUrlBase64(JSON.stringify(headers)),\n    claims: strToUrlBase64(JSON.stringify(claims)),\n  };\n\n  const data = strToUint8(`${jws.protected}.${jws.claims}`);\n  const sigType = { name: ALGO_NAME, hash: { name: 'SHA-256' } };\n\n  const sig = uint8ToUrlBase64(new Uint8Array(await subtle.sign(sigType, privateJwk, data)));\n  return `${jws.protected}.${jws.claims}.${sig}`;\n}\n\nasync function getPublicKey() {\n  if (!isWebCryptoSupported()) {\n    console.info('webcrypto is not supported');\n    return undefined;\n  }\n\n  if (!(await getItem(STORE_KEY_PUBLIC_JWK))) {\n    await generateWCKP();\n  }\n\n  return getItem(STORE_KEY_PUBLIC_JWK) as JsonWebKey;\n}\n\nasync function generateWCKP() {\n  // to avoid a nasty babel bug we have to hoist this above the await ourselves\n  // https://github.com/rpetrich/babel-plugin-transform-async-to-promises/issues/20\n  let jwkPublicKey = null;\n  const { subtle } = window.crypto;\n  const kp = await subtle.generateKey(\n    EC_GEN_PARAMS,\n    true, // need to export the public key which means private exports too\n    ['sign'],\n  );\n\n  // export keys so we can send the public key.\n  const jwkPrivateKey = await subtle.exportKey('jwk', kp.privateKey!);\n  jwkPublicKey = await subtle.exportKey('jwk', kp.publicKey!);\n\n  // reimport the private key so it becomes non exportable when persisting.\n  const nonExportPrivateKey = await subtle.importKey('jwk', jwkPrivateKey, EC_IMPORT_PARAMS, false, ['sign']);\n\n  // persist keys\n  await setItem(STORE_KEY_PRIVATE_KEY, nonExportPrivateKey);\n  // persist the jwk public key since it needs to be exported anyways\n  await setItem(STORE_KEY_PUBLIC_JWK, jwkPublicKey);\n}\n\nfunction isWebCryptoSupported() {\n  const hasCrypto = typeof window !== 'undefined' && !!(window.crypto as any);\n  const hasSubtleCrypto = hasCrypto && !!(window.crypto.subtle as any);\n\n  return hasCrypto && hasSubtleCrypto;\n}\n\nfunction strToUrlBase64(str: string) {\n  return binToUrlBase64(utf8ToBinaryString(str));\n}\n\nfunction strToUint8(str: string) {\n  return new TextEncoder().encode(str);\n}\n\nfunction binToUrlBase64(bin: string) {\n  return btoa(bin).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+/g, '');\n}\n\nfunction utf8ToBinaryString(str: string) {\n  const escstr = encodeURIComponent(str);\n  // replaces any uri escape sequence, such as %0A,\n  // with binary escape, such as 0x0A\n  return escstr.replace(/%([0-9A-F]{2})/g, (_, p1) => String.fromCharCode(parseInt(p1, 16)));\n}\n\nfunction uint8ToUrlBase64(uint8: Uint8Array) {\n  let bin = '';\n  uint8.forEach((code) => {\n    bin += String.fromCharCode(code);\n  });\n  return binToUrlBase64(bin);\n}\n","/* eslint-disable consistent-return, prefer-spread */\n\nimport {\n  JsonRpcRequestPayload,\n  JsonRpcRequestCallback,\n  MagicOutgoingWindowMessage,\n  JsonRpcBatchRequestCallback,\n  JsonRpcResponsePayload,\n} from '@magic-sdk/types';\nimport { BaseModule } from './base-module';\nimport { createInvalidArgumentError, MagicRPCError, createSynchronousWeb3MethodWarning } from '../core/sdk-exceptions';\nimport { createJsonRpcRequestPayload, standardizeJsonRpcRequestPayload, JsonRpcResponse } from '../core/json-rpc';\nimport { PromiEvent } from '../util/promise-tools';\nimport { createTypedEmitter, EventsDefinition, TypedEmitter } from '../util/events';\n\nconst { createBoundEmitterMethod, createChainingEmitterMethod } = createTypedEmitter();\n\n/** */\nexport class RPCProviderModule extends BaseModule implements TypedEmitter {\n  // Implements EIP 1193:\n  // https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1193.md\n\n  public readonly isMagic = true;\n\n  /* eslint-disable prettier/prettier */\n  public sendAsync(payload: Partial<JsonRpcRequestPayload>, onRequestComplete: JsonRpcRequestCallback): void;\n  public sendAsync(payload: Partial<JsonRpcRequestPayload>[], onRequestComplete: JsonRpcBatchRequestCallback): void;\n  public sendAsync(\n    payload: Partial<JsonRpcRequestPayload> | Partial<JsonRpcRequestPayload>[],\n    onRequestComplete: JsonRpcRequestCallback | JsonRpcBatchRequestCallback,\n  ): void;\n  /* eslint-enable prettier/prettier */\n  public sendAsync(\n    payload: Partial<JsonRpcRequestPayload> | Partial<JsonRpcRequestPayload>[],\n    onRequestComplete: JsonRpcRequestCallback | JsonRpcBatchRequestCallback,\n  ): void {\n    if (!onRequestComplete) {\n      throw createInvalidArgumentError({\n        procedure: 'Magic.rpcProvider.sendAsync',\n        argument: 1,\n        expected: 'function',\n        received: onRequestComplete === null ? 'null' : typeof onRequestComplete,\n      });\n    }\n\n    if (Array.isArray(payload)) {\n      this.overlay\n        .post(\n          MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST,\n          payload.map((p) => {\n            const standardizedPayload = standardizeJsonRpcRequestPayload(p);\n            this.prefixPayloadMethodForTestMode(standardizedPayload);\n            return standardizedPayload;\n          }),\n        )\n        .then((batchResponse) => {\n          (onRequestComplete as JsonRpcBatchRequestCallback)(\n            null,\n            batchResponse.map((response) => ({\n              ...response.payload,\n              error: response.hasError ? new MagicRPCError(response.payload.error) : null,\n            })),\n          );\n        });\n    } else {\n      const finalPayload = standardizeJsonRpcRequestPayload(payload);\n      this.prefixPayloadMethodForTestMode(finalPayload);\n      this.overlay.post(MagicOutgoingWindowMessage.MAGIC_HANDLE_REQUEST, finalPayload).then((response) => {\n        (onRequestComplete as JsonRpcRequestCallback)(\n          response.hasError ? new MagicRPCError(response.payload.error) : null,\n          response.payload,\n        );\n      });\n    }\n  }\n\n  /* eslint-disable prettier/prettier */\n  public send<ResultType = any>(method: string, params?: any[]): PromiEvent<ResultType>;\n  public send(\n    payload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n    onRequestComplete: JsonRpcRequestCallback,\n  ): void;\n  public send<ResultType>(payload: JsonRpcRequestPayload, none: void): JsonRpcResponsePayload<ResultType>;\n  /* eslint-enable prettier/prettier */\n  public send<ResultType = any>(\n    payloadOrMethod: string | JsonRpcRequestPayload | JsonRpcRequestPayload[],\n    onRequestCompleteOrParams: JsonRpcRequestCallback | any[] | void,\n  ): PromiEvent<ResultType> | JsonRpcResponsePayload<ResultType> | void {\n    // Case #1\n    // Web3 >= 1.0.0-beta.38 calls `send` with method and parameters.\n    if (typeof payloadOrMethod === 'string') {\n      const payload = createJsonRpcRequestPayload(\n        payloadOrMethod,\n        Array.isArray(onRequestCompleteOrParams) ? onRequestCompleteOrParams : [],\n      );\n      return this.request(payload) as any;\n    }\n\n    // Case #2\n    // Web3 <= 1.0.0-beta.37 uses `send` with a callback for async queries.\n    if (Array.isArray(payloadOrMethod) || !!onRequestCompleteOrParams) {\n      /* eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion */\n      this.sendAsync(payloadOrMethod, onRequestCompleteOrParams as any);\n      return;\n    }\n\n    // Case #3\n    // Legacy synchronous methods (unsupported).\n    const warning = createSynchronousWeb3MethodWarning();\n    warning.log();\n    return new JsonRpcResponse(payloadOrMethod).applyError({\n      code: -32603,\n      message: warning.rawMessage,\n    }).payload;\n  }\n\n  public enable() {\n    const requestPayload = createJsonRpcRequestPayload('eth_accounts');\n    return this.request<string[]>(requestPayload);\n  }\n\n  /**\n   * Here, we wrap `BaseModule.request` with an additional check\n   * to determine if the RPC method requires a test-mode prefix.\n   */\n  protected request<ResultType = any, Events extends EventsDefinition = void>(payload: Partial<JsonRpcRequestPayload>) {\n    this.prefixPayloadMethodForTestMode(payload);\n    return super.request<ResultType, Events>(payload);\n  }\n\n  /**\n   * Prefixes Ethereum RPC methods with a `testMode` identifier. This is done so\n   * that Magic's <iframe> can handle signing methods using test-specific keys.\n   */\n  private prefixPayloadMethodForTestMode(payload: Partial<JsonRpcRequestPayload>) {\n    const testModePrefix = 'testMode/eth/';\n\n    // In test mode, we prefix all RPC methods with `test/` so that the\n    // Magic <iframe> can handle them without requiring network calls.\n    if (this.sdk.testMode) {\n      // eslint-disable-next-line no-param-reassign\n      payload.method = `${testModePrefix}${payload.method}`;\n    }\n  }\n\n  public on = createChainingEmitterMethod('on', this);\n  public once = createChainingEmitterMethod('once', this);\n  public addListener = createChainingEmitterMethod('addListener', this);\n\n  public off = createChainingEmitterMethod('off', this);\n  public removeListener = createChainingEmitterMethod('removeListener', this);\n  public removeAllListeners = createChainingEmitterMethod('removeAllListeners', this);\n\n  public emit = createBoundEmitterMethod('emit');\n  public eventNames = createBoundEmitterMethod('eventNames');\n  public listeners = createBoundEmitterMethod('listeners');\n  public listenerCount = createBoundEmitterMethod('listenerCount');\n}\n","/**\n * Builds a `URL` object safely.\n */\nexport function createURL(url: string, base?: string): URL {\n  // Safari raises an error if `undefined` is given to the second argument of\n  // the `URL` constructor.\n  return base ? new URL(url, base) : new URL(url);\n}\n","import { createJsonRpcRequestPayload, standardizeJsonRpcRequestPayload } from '../core/json-rpc';\nimport { BaseModule } from './base-module';\nimport { SDKBase, MagicSDKAdditionalConfiguration, MagicSDKExtensionsOption } from '../core/sdk';\nimport { createExtensionNotInitializedError, MagicExtensionError, MagicExtensionWarning } from '../core/sdk-exceptions';\nimport { createPromiEvent, encodeJSON, decodeJSON, storage, isPromiEvent } from '../util';\n\ntype AnonymousExtension = 'anonymous extension';\n\ninterface BaseExtension<TName extends string = AnonymousExtension> extends BaseModule {\n  /**\n   * A structure describing the platform and version compatiblity of this\n   * extension.\n   */\n  compat?: {\n    'magic-sdk': boolean | string;\n    '@magic-sdk/react-native': boolean | string;\n  };\n}\n\nconst sdkAccessFields = ['request', 'overlay', 'sdk'];\n\n/**\n * From the `BaseExtension`-derived instance, get the prototype\n * chain up to and including the `BaseModule` class.\n */\nfunction getPrototypeChain<T extends BaseExtension<string>>(instance: T) {\n  let currentProto = Object.getPrototypeOf(instance);\n  const protos = [currentProto];\n\n  while (currentProto !== BaseModule.prototype) {\n    currentProto = Object.getPrototypeOf(currentProto);\n    protos.push(currentProto);\n  }\n\n  return protos;\n}\n\nabstract class BaseExtension<TName extends string = AnonymousExtension> extends BaseModule {\n  public abstract readonly name: TName;\n\n  private __sdk_access_field_descriptors__ = new Map<\n    string,\n    { descriptor: PropertyDescriptor; isPrototypeField: boolean }\n  >();\n  private __is_initialized__ = false;\n\n  protected utils = {\n    createPromiEvent,\n    isPromiEvent,\n    encodeJSON,\n    decodeJSON,\n    createJsonRpcRequestPayload,\n    standardizeJsonRpcRequestPayload,\n    storage,\n  };\n\n  constructor() {\n    super(undefined as any);\n\n    // Disallow SDK access before initialization...\n\n    const allSources = [this, ...getPrototypeChain(this)];\n\n    sdkAccessFields.forEach((prop) => {\n      const allDescriptors = allSources.map((source) => Object.getOwnPropertyDescriptor(source, prop));\n      const sourceIndex = allDescriptors.findIndex((x) => !!x);\n      const isPrototypeField = sourceIndex > 0;\n      const descriptor = allDescriptors[sourceIndex];\n\n      /* istanbul ignore else */\n      if (descriptor) {\n        this.__sdk_access_field_descriptors__.set(prop, { descriptor, isPrototypeField });\n\n        Object.defineProperty(this, prop, {\n          configurable: true,\n          get: () => {\n            throw createExtensionNotInitializedError(prop);\n          },\n        });\n      }\n    });\n  }\n\n  /**\n   * Registers a Magic SDK instance with this Extension.\n   *\n   * @internal\n   */\n  public init(sdk: SDKBase) {\n    if (this.__is_initialized__) return;\n\n    // Replace original property descriptors\n    // for SDK access fields post-initialization.\n    sdkAccessFields.forEach((prop) => {\n      /* istanbul ignore else */\n      if (this.__sdk_access_field_descriptors__.has(prop)) {\n        const { descriptor, isPrototypeField } = this.__sdk_access_field_descriptors__.get(prop)!;\n\n        if (isPrototypeField) {\n          // For prototype fields, we just need the `delete` operator so that\n          // the instance will fallback to the prototype chain itself.\n          delete this[prop as keyof this];\n        } else {\n          Object.defineProperty(this, prop, descriptor);\n        }\n      }\n    });\n\n    this.sdk = sdk;\n    this.__is_initialized__ = true;\n  }\n\n  /**\n   * Creates a deprecation warning wrapped with a native Magic SDK warning type.\n   * Best practice is to warn users of upcoming deprecations at least one major\n   * version before the change is implemented. You can use this method to\n   * communicate deprecations in a manner consistent with Magic SDK core code.\n   */\n  protected createDeprecationWarning(options: {\n    method: string;\n    removalVersion: string;\n    useInstead?: string;\n  }): MagicExtensionWarning {\n    const { method, removalVersion, useInstead } = options;\n\n    const useInsteadSuffix = useInstead ? ` Use \\`${useInstead}\\` instead.` : '';\n    const message = `\\`${method}\\` will be removed from this Extension in version \\`${removalVersion}\\`.${useInsteadSuffix}`;\n    return new MagicExtensionWarning(this, 'DEPRECATION_NOTICE', message);\n  }\n\n  /**\n   * Creates a warning wrapped with a native Magic SDK warning type. This\n   * maintains consistency in warning messaging for consumers of Magic SDK and\n   * this Extension.\n   */\n  protected createWarning(code: string | number, message: string): MagicExtensionWarning {\n    return new MagicExtensionWarning(this, code, message);\n  }\n\n  /**\n   * Creates an error wrapped with a native Magic SDK error type. This maintains\n   * consistency in error handling for consumers of Magic SDK and this\n   * Extension.\n   */\n  protected createError<TData = any>(code: string | number, message: string, data: TData): MagicExtensionError<TData> {\n    return new MagicExtensionError<TData>(this, code, message, data);\n  }\n}\n\nabstract class InternalExtension<TName extends string, TConfig extends any = any> extends BaseExtension<TName> {\n  public abstract readonly config: TConfig;\n}\n\n/**\n * A base class representing \"extensions\" to the core Magic JS APIs. Extensions\n * enable new functionality by composing Magic endpoints methods together.\n */\nexport abstract class Extension<TName extends string = AnonymousExtension> extends BaseExtension<TName> {\n  /**\n   * This is a special constructor used to mark \"official\" extensions. These\n   * extensions are designed for special interaction with the Magic iframe using\n   * custom JSON RPC methods, business logic, and global configurations. This is\n   * intended for internal-use only (and provides no useful advantage to\n   * open-source extension developers over the regular `Extension` class).\n   *\n   * @internal\n   */\n  public static Internal = InternalExtension;\n  public static Anonymous: AnonymousExtension = 'anonymous extension';\n}\n\n/**\n * These fields are exposed on the `Extension` type,\n * but should be hidden from the public interface.\n */\ntype HiddenExtensionFields = 'name' | 'init' | 'config' | 'compat';\n\n/**\n * Gets the type contained in an array type.\n */\ntype UnwrapArray<T extends any[]> = T extends Array<infer P> ? P : never;\n\n/**\n * Create a union type of Extension names from an\n * array of Extension types given by `TExt`.\n */\ntype ExtensionNames<TExt extends Extension<string>[]> = UnwrapArray<TExt> extends Extension<infer R> ? R : never;\n\n/**\n * From the literal Extension name type given by `TExtName`,\n * extract a dictionary of Extension types.\n */\ntype GetExtensionFromName<TExt extends Extension<string>[], TExtName extends string> = {\n  [P in TExtName]: Extract<UnwrapArray<TExt>, Extension<TExtName>>;\n}[TExtName];\n\n/**\n * Wraps a Magic SDK constructor with the necessary type\n * information to support a strongly-typed `Extension` interface.\n */\nexport type WithExtensions<SDK extends SDKBase> = {\n  new <TCustomExtName extends string, TExt extends MagicSDKExtensionsOption<TCustomExtName>>(\n    apiKey: string,\n    options?: MagicSDKAdditionalConfiguration<TCustomExtName, TExt>,\n  ): InstanceWithExtensions<SDK, TExt>;\n};\n\nexport type InstanceWithExtensions<SDK extends SDKBase, TExt extends MagicSDKExtensionsOption> = SDK &\n  {\n    [P in Exclude<\n      TExt extends Extension<string>[] ? ExtensionNames<TExt> : keyof TExt,\n      number | AnonymousExtension\n    >]: TExt extends Extension<string>[]\n      ? Omit<GetExtensionFromName<TExt, P>, HiddenExtensionFields>\n      : TExt extends {\n          [P in Exclude<\n            TExt extends Extension<string>[] ? ExtensionNames<TExt> : keyof TExt,\n            number | AnonymousExtension\n          >]: Extension<string>;\n        }\n      ? Omit<TExt[P], HiddenExtensionFields>\n      : never;\n  };\n","/* eslint-disable no-param-reassign  */\n\nimport { EthNetworkConfiguration, QueryParameters, SupportedLocale } from '@magic-sdk/types';\nimport type { AbstractProvider } from 'web3-core';\nimport { coerce, satisfies } from '../util/semver';\nimport { encodeJSON } from '../util/base64-json';\nimport {\n  createMissingApiKeyError,\n  createReactNativeEndpointConfigurationWarning,\n  createIncompatibleExtensionsError,\n} from './sdk-exceptions';\nimport { AuthModule } from '../modules/auth';\nimport { UserModule } from '../modules/user';\nimport { RPCProviderModule } from '../modules/rpc-provider';\nimport { ViewController } from './view-controller';\nimport { createURL } from '../util/url';\nimport { Extension } from '../modules/base-extension';\nimport { isEmpty } from '../util/type-guards';\nimport { SDKEnvironment, sdkNameToEnvName } from './sdk-environment';\n\n/**\n * Checks if the given `ext` is compatible with the platform & version of Magic\n * SDK currently in use.\n */\nfunction checkExtensionCompat(ext: Extension<string>) {\n  if (ext.compat && ext.compat[SDKEnvironment.sdkName] != null) {\n    return typeof ext.compat[SDKEnvironment.sdkName] === 'string'\n      ? satisfies(coerce(SDKEnvironment.version), ext.compat[SDKEnvironment.sdkName] as string)\n      : !!ext.compat[SDKEnvironment.sdkName];\n  }\n\n  // To gracefully support older extensions, we assume\n  // compatibility when the `compat` field is missing.\n  return true;\n}\n\n/**\n * Initializes SDK extensions, checks for platform/version compatiblity issues,\n * then consolidates any global configurations provided by those extensions.\n */\nfunction prepareExtensions(this: SDKBase, options?: MagicSDKAdditionalConfiguration): Record<string, any> {\n  const extensions: Extension<string>[] | { [key: string]: Extension<string> } = options?.extensions ?? [];\n  const extConfig: any = {};\n  const incompatibleExtensions: Extension<string>[] = [];\n\n  if (Array.isArray(extensions)) {\n    extensions.forEach((ext) => {\n      if (checkExtensionCompat(ext)) {\n        ext.init(this);\n        if (ext.name || ext.name !== Extension.Anonymous) {\n          // Only apply extensions with a known, defined `name` parameter.\n          (this as any)[ext.name] = ext;\n        }\n        if (ext instanceof Extension.Internal) {\n          if (!isEmpty(ext.config)) extConfig[ext.name] = ext.config;\n        }\n      } else {\n        incompatibleExtensions.push(ext);\n      }\n    });\n  } else {\n    Object.keys(extensions).forEach((name) => {\n      if (checkExtensionCompat(extensions[name])) {\n        extensions[name].init(this);\n        const ext = extensions[name];\n        (this as any)[name] = ext;\n        if (ext instanceof Extension.Internal) {\n          if (!isEmpty(ext.config)) extConfig[extensions[name].name] = ext.config;\n        }\n      } else {\n        incompatibleExtensions.push(extensions[name]);\n      }\n    });\n  }\n\n  if (incompatibleExtensions.length) {\n    throw createIncompatibleExtensionsError(incompatibleExtensions);\n  }\n\n  return extConfig;\n}\n\nexport type MagicSDKExtensionsOption<TCustomExtName extends string = string> =\n  | Extension<string>[]\n  | { [P in TCustomExtName]: Extension<string> };\n\nexport interface MagicSDKAdditionalConfiguration<\n  TCustomExtName extends string = string,\n  TExt extends MagicSDKExtensionsOption<TCustomExtName> = any,\n> {\n  endpoint?: string;\n  locale?: SupportedLocale;\n  network?: EthNetworkConfiguration;\n  extensions?: TExt;\n  testMode?: boolean;\n}\n\nexport class SDKBase {\n  private static readonly __overlays__: Map<string, ViewController> = new Map();\n\n  protected readonly endpoint: string;\n  protected readonly parameters: string;\n  public readonly testMode: boolean;\n\n  /**\n   * Contains methods for starting a Magic SDK authentication flow.\n   */\n  public readonly auth: AuthModule;\n\n  /**\n   * Contains methods for interacting with user data, checking login\n   * status, generating cryptographically-secure ID tokens, and more.\n   */\n  public readonly user: UserModule;\n\n  /**\n   * Contains a Web3-compliant provider. Pass this module to your Web3/Ethers\n   * instance for automatic compatibility with Ethereum methods.\n   */\n  public readonly rpcProvider: RPCProviderModule & AbstractProvider;\n\n  /**\n   * Creates an instance of Magic SDK.\n   */\n  constructor(public readonly apiKey: string, options?: MagicSDKAdditionalConfiguration) {\n    if (!apiKey) throw createMissingApiKeyError();\n\n    if (SDKEnvironment.platform === 'react-native' && options?.endpoint) {\n      createReactNativeEndpointConfigurationWarning().log();\n    }\n\n    const { defaultEndpoint, version } = SDKEnvironment;\n    this.testMode = !!options?.testMode;\n    this.endpoint = createURL(options?.endpoint ?? defaultEndpoint).origin;\n\n    // Prepare built-in modules\n    this.auth = new AuthModule(this);\n    this.user = new UserModule(this);\n    this.rpcProvider = new RPCProviderModule(this) as any;\n\n    // Prepare extensions\n    const extConfig: any = prepareExtensions.call(this, options);\n\n    // Encode parameters as base64-JSON\n    this.parameters = encodeJSON<QueryParameters>({\n      API_KEY: this.apiKey,\n      DOMAIN_ORIGIN: window.location ? window.location.origin : '',\n      ETH_NETWORK: options?.network,\n      host: createURL(this.endpoint).host,\n      sdk: sdkNameToEnvName[SDKEnvironment.sdkName],\n      version,\n      ext: isEmpty(extConfig) ? undefined : extConfig,\n      locale: options?.locale || 'en_US',\n    });\n  }\n\n  /**\n   * Represents the view controller associated with this `MagicSDK` instance.\n   */\n  protected get overlay(): ViewController {\n    if (!SDKBase.__overlays__.has(this.parameters)) {\n      const controller = new SDKEnvironment.ViewController(this.endpoint, this.parameters);\n\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore - We don't want to expose this method to the user, but we\n      // need to invoke in here so that the `ViewController` is ready for use.\n      controller.init();\n\n      SDKBase.__overlays__.set(this.parameters, controller);\n    }\n\n    return SDKBase.__overlays__.get(this.parameters)!;\n  }\n\n  /**\n   * Preloads the Magic view, allowing for faster initial requests in browser\n   * environments. Awaiting the returned promise will signal when the Magic view\n   * has completed loading and is ready for requests.\n   */\n  public async preload() {\n    await this.overlay.ready;\n  }\n}\n","import {\n  MagicIncomingWindowMessage,\n  MagicOutgoingWindowMessage,\n  JsonRpcRequestPayload,\n  MagicMessageEvent,\n  MagicMessageRequest,\n} from '@magic-sdk/types';\nimport { JsonRpcResponse } from './json-rpc';\nimport { createPromise } from '../util/promise-tools';\nimport { getItem, setItem } from '../util/storage';\nimport { createJwt } from '../util/web-crypto';\nimport { SDKEnvironment } from './sdk-environment';\n\ninterface RemoveEventListenerFunction {\n  (): void;\n}\n\ninterface StandardizedResponse {\n  id?: string | number;\n  response?: JsonRpcResponse;\n}\n\n/**\n * Get the originating payload from a batch request using the specified `id`.\n */\nfunction getRequestPayloadFromBatch(\n  requestPayload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n  id?: string | number | null,\n): JsonRpcRequestPayload | undefined {\n  return id && Array.isArray(requestPayload)\n    ? requestPayload.find((p) => p.id === id)\n    : (requestPayload as JsonRpcRequestPayload);\n}\n\n/**\n * Ensures the incoming response follows the expected schema and parses for a\n * JSON RPC payload ID.\n */\nfunction standardizeResponse(\n  requestPayload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n  event: MagicMessageEvent,\n): StandardizedResponse {\n  const id = event.data.response?.id;\n  const requestPayloadResolved = getRequestPayloadFromBatch(requestPayload, id);\n\n  if (id && requestPayloadResolved) {\n    // Build a standardized response object\n    const response = new JsonRpcResponse(requestPayloadResolved)\n      .applyResult(event.data.response.result)\n      .applyError(event.data.response.error);\n\n    return { id, response };\n  }\n\n  return {};\n}\n\nasync function createMagicRequest(msgType: string, payload: JsonRpcRequestPayload | JsonRpcRequestPayload[]) {\n  const rt = await getItem<string>('rt');\n  let jwt;\n\n  // only for webcrypto platforms\n  if (SDKEnvironment.platform === 'web') {\n    try {\n      jwt = await createJwt();\n    } catch (e) {\n      console.error('webcrypto error', e);\n    }\n  }\n\n  if (!jwt) {\n    return { msgType, payload };\n  }\n\n  if (!rt) {\n    return { msgType, payload, jwt };\n  }\n\n  return { msgType, payload, jwt, rt };\n}\n\nasync function persistMagicEventRefreshToken(event: MagicMessageEvent) {\n  if (!event.data.rt) {\n    return;\n  }\n\n  await setItem('rt', event.data.rt);\n}\n\nexport abstract class ViewController {\n  public ready: Promise<void>;\n  protected readonly messageHandlers = new Set<(event: MagicMessageEvent) => any>();\n\n  /**\n   * Create an instance of `ViewController`\n   *\n   * @param endpoint - The URL for the relevant iframe context.\n   * @param parameters - The unique, encoded query parameters for the\n   * relevant iframe context.\n   */\n  constructor(protected readonly endpoint: string, protected readonly parameters: string) {\n    this.ready = this.waitForReady();\n    this.listen();\n  }\n\n  protected abstract init(): void;\n  protected abstract _post(data: MagicMessageRequest): Promise<void>;\n  protected abstract hideOverlay(): void;\n  protected abstract showOverlay(): void;\n\n  /**\n   * Send a payload to the Magic `<iframe>` for processing and automatically\n   * handle the acknowledging follow-up event(s).\n   *\n   * @param msgType - The type of message to encode with the data.\n   * @param payload - The JSON RPC payload to emit via `window.postMessage`.\n   */\n  public async post<ResultType = any>(\n    msgType: MagicOutgoingWindowMessage,\n    payload: JsonRpcRequestPayload[],\n  ): Promise<JsonRpcResponse<ResultType>[]>;\n\n  public async post<ResultType = any>(\n    msgType: MagicOutgoingWindowMessage,\n    payload: JsonRpcRequestPayload,\n  ): Promise<JsonRpcResponse<ResultType>>;\n\n  public async post<ResultType = any>(\n    msgType: MagicOutgoingWindowMessage,\n    payload: JsonRpcRequestPayload | JsonRpcRequestPayload[],\n  ): Promise<JsonRpcResponse<ResultType> | JsonRpcResponse<ResultType>[]> {\n    return createPromise(async (resolve) => {\n      await this.ready;\n\n      const batchData: JsonRpcResponse[] = [];\n      const batchIds = Array.isArray(payload) ? payload.map((p) => p.id) : [];\n      const msg = await createMagicRequest(`${msgType}-${this.parameters}`, payload);\n\n      await this._post(msg);\n\n      /**\n       * Collect successful RPC responses and resolve.\n       */\n      const acknowledgeResponse = (removeEventListener: RemoveEventListenerFunction) => (event: MagicMessageEvent) => {\n        const { id, response } = standardizeResponse(payload, event);\n        persistMagicEventRefreshToken(event);\n\n        if (id && response && Array.isArray(payload) && batchIds.includes(id)) {\n          batchData.push(response);\n\n          // For batch requests, we wait for all responses before resolving.\n          if (batchData.length === payload.length) {\n            removeEventListener();\n            resolve(batchData);\n          }\n        } else if (id && response && !Array.isArray(payload) && id === payload.id) {\n          removeEventListener();\n          resolve(response);\n        }\n      };\n\n      // Listen for and handle responses.\n      const removeResponseListener = this.on(\n        MagicIncomingWindowMessage.MAGIC_HANDLE_RESPONSE,\n        acknowledgeResponse(() => removeResponseListener()),\n      );\n    });\n  }\n\n  /**\n   * Listen for events received with the given `msgType`.\n   *\n   * @param msgType - The `msgType` encoded with the event data.\n   * @param handler - A handler function to execute on each event received.\n   * @return A `void` function to remove the attached event.\n   */\n  public on(\n    msgType: MagicIncomingWindowMessage,\n    handler: (this: Window, event: MagicMessageEvent) => any,\n  ): RemoveEventListenerFunction {\n    const boundHandler = handler.bind(window);\n\n    // We cannot effectively cover this function because it never gets reference\n    // by value. The functionality of this callback is tested within\n    // `initMessageListener`.\n    /* istanbul ignore next */\n    const listener = (event: MagicMessageEvent) => {\n      if (event.data.msgType === `${msgType}-${this.parameters}`) boundHandler(event);\n    };\n\n    this.messageHandlers.add(listener);\n    return () => this.messageHandlers.delete(listener);\n  }\n\n  private waitForReady() {\n    return new Promise<void>((resolve) => {\n      this.on(MagicIncomingWindowMessage.MAGIC_OVERLAY_READY, () => resolve());\n    });\n  }\n\n  /**\n   * Listen for messages sent from the underlying Magic `<WebView>`.\n   */\n  private listen() {\n    this.on(MagicIncomingWindowMessage.MAGIC_HIDE_OVERLAY, () => {\n      this.hideOverlay();\n    });\n\n    this.on(MagicIncomingWindowMessage.MAGIC_SHOW_OVERLAY, () => {\n      this.showOverlay();\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}