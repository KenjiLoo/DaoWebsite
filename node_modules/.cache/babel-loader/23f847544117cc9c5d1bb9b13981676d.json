{"ast":null,"code":"import _asyncToGenerator from\"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/DaoWebsite/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\DaoWebsite\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import\"./pages.css\";import{Widget,Blockie,Icon,Tooltip,Tag,Table,Form}from\"web3uikit\";import{Link}from\"react-router-dom\";import{useLocation}from\"react-router\";import{useMoralis,useWeb3ExecuteFunction}from\"react-moralis\";// eslint-disable-next-line\nimport{Affix}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Proposal=function Proposal(){var _useLocation=useLocation(),proposalDetails=_useLocation.state;var _useMoralis=useMoralis(),Moralis=_useMoralis.Moralis,isInitialized=_useMoralis.isInitialized;var _useState=useState(),_useState2=_slicedToArray(_useState,2),latestVote=_useState2[0],setLatestVote=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),percUp=_useState4[0],setPercUp=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),percDown=_useState6[0],setPercDown=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),votes=_useState8[0],setVotes=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),sub=_useState10[0],setSub=_useState10[1];var contractProcessor=useWeb3ExecuteFunction();useEffect(function(){if(isInitialized){var getVotes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var Votes,query,results,votesDirection;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:Votes=Moralis.Object.extend(\"Votes\");query=new Moralis.Query(Votes);query.equalTo(\"proposal\",proposalDetails.id);query.descending(\"createdAt\");_context.next=6;return query.find();case 6:results=_context.sent;if(results.length>0){setLatestVote(results[0].attributes);setPercDown((Number(results[0].attributes.votesDown)/(Number(results[0].attributes.votesDown)+Number(results[0].attributes.votesUp))*100).toFixed(0));setPercUp((Number(results[0].attributes.votesUp)/(Number(results[0].attributes.votesDown)+Number(results[0].attributes.votesUp))*100).toFixed(0));}votesDirection=results.map(function(e){return[e.attributes.voter,/*#__PURE__*/_jsx(Icon,{fill:e.attributes.votedFor?\"#2cc40a\":\"#d93d3d\",size:24,svg:e.attributes.votedFor?\"checkmark\":\"arrowCircleDown\"})];});setVotes(votesDirection);case 10:case\"end\":return _context.stop();}}},_callee);}));return function getVotes(){return _ref.apply(this,arguments);};}();getVotes();}// eslint-disable-next-line\n},[isInitialized]);function castVote(_x){return _castVote.apply(this,arguments);}function _castVote(){_castVote=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(upDown){var options;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:options={contractAddress:\"0xAEEAfcA812D0f122006da84E2ADDFa17c1A1f035\",functionName:\"voteOnProposal\",abi:[{input:[{internalType:\"uint256\",name:\"_id\",type:\"uint256\"},{internalType:\"bool\",name:\"_vote\",type:\"bool\"}],name:\"voteOnProposal\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"}],params:{_id:proposalDetails.id,_vote:upDown}};_context2.next=3;return contractProcessor.fetch({params:options,onSuccess:function onSuccess(){console.log(\"Vote Cast Succesfully\");setSub(false);},onError:function onError(error){alert(error.data.message);setSub(false);}});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _castVote.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"contentProposal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"proposal\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"backHome\",children:[/*#__PURE__*/_jsx(Icon,{fill:\"#e91e63\",size:20,svg:\"chevronLeft\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#e91e63'},children:\"Overview\"})]})}),/*#__PURE__*/_jsx(\"div\",{children:proposalDetails.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"proposalOverview\",children:[/*#__PURE__*/_jsx(Tag,{color:proposalDetails.color,text:proposalDetails.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"proposer\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Proposed By\"}),/*#__PURE__*/_jsx(Tooltip,{content:proposalDetails.proposer,children:/*#__PURE__*/_jsx(Blockie,{seed:proposalDetails.proposer})})]})]})]}),latestVote&&/*#__PURE__*/_jsxs(\"div\",{className:\"widgets\",children:[/*#__PURE__*/_jsx(Widget,{info:latestVote.votesUp,title:\"Votes For\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"extraWidgetInfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"extraTItle\",children:[percUp,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progressPercentage\",style:{width:\"\".concat(percUp,\"%\")}})})]})}),/*#__PURE__*/_jsx(Widget,{info:latestVote.votesDown,title:\"Votes Against\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"extraWidgetInfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"extraTItle\",children:[percDown,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"progress\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progressPercentage\",style:{width:\"\".concat(percDown,\"%\")}})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"votesDiv\",children:[/*#__PURE__*/_jsx(Table,{style:{width:\"60%\"},className:\"votingPage\",columnsConfig:\"70% 30%\",data:votes,header:[/*#__PURE__*/_jsx(\"span\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Vote\"})],pageSize:5}),/*#__PURE__*/_jsx(Form,{isDisabled:proposalDetails.text!==\"Ongoing\",style:{width:\"30%\",height:\"250px\",border:\"1px solid rgba(6,158,252,0.2)\"},buttonConfig:{isLoading:sub,loadingText:\"Casting Vote\",text:\"Vote\",theme:\"secondary\"},data:[{inputWidth:\"100%\",name:\"Cast Vote\",options:[\"For\",\"Against\"],type:\"radios\",validation:{required:true}}]//the voting problem is here //solved* inputResults -> inputResult\n,onSubmit:function onSubmit(e){if(e.data[0].inputResult[0]===\"For\"){castVote(true);console.log(\"pass\");}else{castVote(false);console.log(\"not passs\");}setSub(true);},Title:\"Cast Vote\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"voting\"})]});};export default Proposal;","map":{"version":3,"sources":["C:/DaoWebsite/src/pages/Proposal.js"],"names":["React","useState","useEffect","Widget","Blockie","Icon","Tooltip","Tag","Table","Form","Link","useLocation","useMoralis","useWeb3ExecuteFunction","Affix","Proposal","proposalDetails","state","Moralis","isInitialized","latestVote","setLatestVote","percUp","setPercUp","percDown","setPercDown","votes","setVotes","sub","setSub","contractProcessor","getVotes","Votes","Object","extend","query","Query","equalTo","id","descending","find","results","length","attributes","Number","votesDown","votesUp","toFixed","votesDirection","map","e","voter","votedFor","castVote","upDown","options","contractAddress","functionName","abi","input","internalType","name","type","outputs","stateMutability","params","_id","_vote","fetch","onSuccess","console","log","onError","error","alert","data","message","color","description","text","proposer","width","height","border","isLoading","loadingText","theme","inputWidth","validation","required","inputResult"],"mappings":"kTAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,aAAP,CACA,OAASC,MAAT,CAAiBC,OAAjB,CAA0BC,IAA1B,CAAgCC,OAAhC,CAAyCC,GAAzC,CAA8CC,KAA9C,CAAqDC,IAArD,KAAiE,WAAjE,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,UAAT,CAAqBC,sBAArB,KAAmD,eAAnD,CAEA;AACA,OAASC,KAAT,KAAsB,MAAtB,C,6IAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CAErB,iBAAmCJ,WAAW,EAA9C,CAAeK,eAAf,cAAQC,KAAR,CACA,gBAAmCL,UAAU,EAA7C,CAAQM,OAAR,aAAQA,OAAR,CAAiBC,aAAjB,aAAiBA,aAAjB,CACA,cAAsClB,QAAQ,EAA9C,wCAAQmB,UAAR,eAAoBC,aAApB,eACA,eAA8BpB,QAAQ,CAAC,CAAD,CAAtC,yCAAQqB,MAAR,eAAgBC,SAAhB,eACA,eAAkCtB,QAAQ,CAAC,CAAD,CAA1C,yCAAQuB,QAAR,eAAkBC,WAAlB,eACA,eAA4BxB,QAAQ,CAAC,EAAD,CAApC,yCAAQyB,KAAR,eAAeC,QAAf,eACA,eAAwB1B,QAAQ,CAAC,KAAD,CAAhC,0CAAQ2B,GAAR,gBAAaC,MAAb,gBACA,GAAMC,CAAAA,iBAAiB,CAAGjB,sBAAsB,EAAhD,CAEAX,SAAS,CAAC,UAAM,CACd,GAAGiB,aAAH,CAAkB,IACDY,CAAAA,QADC,0FAChB,0KAEQC,KAFR,CAEgBd,OAAO,CAACe,MAAR,CAAeC,MAAf,CAAsB,OAAtB,CAFhB,CAGQC,KAHR,CAGgB,GAAIjB,CAAAA,OAAO,CAACkB,KAAZ,CAAkBJ,KAAlB,CAHhB,CAIEG,KAAK,CAACE,OAAN,CAAc,UAAd,CAA0BrB,eAAe,CAACsB,EAA1C,EACAH,KAAK,CAACI,UAAN,CAAiB,WAAjB,EALF,sBAMwBJ,CAAAA,KAAK,CAACK,IAAN,EANxB,QAMQC,OANR,eAOE,GAAGA,OAAO,CAACC,MAAR,CAAiB,CAApB,CAAsB,CACpBrB,aAAa,CAACoB,OAAO,CAAC,CAAD,CAAP,CAAWE,UAAZ,CAAb,CACAlB,WAAW,CAEP,CAAEmB,MAAM,CAACH,OAAO,CAAC,CAAD,CAAP,CAAWE,UAAX,CAAsBE,SAAvB,CAAN,EAAyCD,MAAM,CAACH,OAAO,CAAC,CAAD,CAAP,CAAWE,UAAX,CAAsBE,SAAvB,CAAN,CAAwCD,MAAM,CAACH,OAAO,CAAC,CAAD,CAAP,CAAWE,UAAX,CAAsBG,OAAvB,CAAvF,CAAD,CAA0H,GAA3H,EAAgIC,OAAhI,CAAwI,CAAxI,CAFO,CAAX,CAMAxB,SAAS,CAEL,CAAEqB,MAAM,CAACH,OAAO,CAAC,CAAD,CAAP,CAAWE,UAAX,CAAsBG,OAAvB,CAAN,EAAuCF,MAAM,CAACH,OAAO,CAAC,CAAD,CAAP,CAAWE,UAAX,CAAsBE,SAAvB,CAAN,CAAwCD,MAAM,CAACH,OAAO,CAAC,CAAD,CAAP,CAAWE,UAAX,CAAsBG,OAAvB,CAArF,CAAD,CAAwH,GAAzH,EAA8HC,OAA9H,CAAsI,CAAtI,CAFK,CAAT,CAMD,CACKC,cAtBR,CAsByBP,OAAO,CAACQ,GAAR,CAAY,SAACC,CAAD,QAAO,CACxCA,CAAC,CAACP,UAAF,CAAaQ,KAD2B,cAExC,KAAC,IAAD,EACE,IAAI,CAAED,CAAC,CAACP,UAAF,CAAaS,QAAb,CAAwB,SAAxB,CAAoC,SAD5C,CAEE,IAAI,CAAE,EAFR,CAGE,GAAG,CAAEF,CAAC,CAACP,UAAF,CAAaS,QAAb,CAAwB,WAAxB,CAAsC,iBAH7C,EAFwC,CAAP,EAAZ,CAtBzB,CA+BEzB,QAAQ,CAACqB,cAAD,CAAR,CA/BF,uDADgB,kBACDjB,CAAAA,QADC,2CAmChBA,QAAQ,GACT,CACD;AACD,CAvCQ,CAuCN,CAACZ,aAAD,CAvCM,CAAT,CAXqB,QAoDNkC,CAAAA,QApDM,oIAoDrB,kBAAwBC,MAAxB,kIACMC,OADN,CACgB,CACZC,eAAe,CAAE,4CADL,CAEZC,YAAY,CAAE,gBAFF,CAGZC,GAAG,CAAE,CACH,CACEC,KAAK,CAAE,CACL,CACEC,YAAY,CAAE,SADhB,CAEEC,IAAI,CAAE,KAFR,CAGEC,IAAI,CAAE,SAHR,CADK,CAML,CACEF,YAAY,CAAE,MADhB,CAEEC,IAAI,CAAE,OAFR,CAGEC,IAAI,CAAE,MAHR,CANK,CADT,CAcED,IAAI,CAAE,gBAdR,CAeEE,OAAO,CAAE,EAfX,CAgBEC,eAAe,CAAE,YAhBnB,CAiBEF,IAAI,CAAC,UAjBP,CADG,CAHO,CAwBZG,MAAM,CAAE,CACNC,GAAG,CAAElD,eAAe,CAACsB,EADf,CAEN6B,KAAK,CAAEb,MAFD,CAxBI,CADhB,wBA+BQxB,CAAAA,iBAAiB,CAACsC,KAAlB,CAAwB,CAC5BH,MAAM,CAAEV,OADoB,CAE5Bc,SAAS,CAAC,oBAAM,CACdC,OAAO,CAACC,GAAR,CAAY,uBAAZ,EACA1C,MAAM,CAAC,KAAD,CAAN,CACD,CAL2B,CAM5B2C,OAAO,CAAE,iBAACC,KAAD,CAAW,CAClBC,KAAK,CAACD,KAAK,CAACE,IAAN,CAAWC,OAAZ,CAAL,CACA/C,MAAM,CAAC,KAAD,CAAN,CACD,CAT2B,CAAxB,CA/BR,yDApDqB,2CAgGrB,mBACE,wCACE,aAAK,SAAS,CAAC,iBAAf,wBACE,aAAK,SAAS,CAAC,UAAf,wBACE,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,uBACE,aAAK,SAAS,CAAC,UAAf,wBACE,KAAC,IAAD,EAAM,IAAI,CAAC,SAAX,CAAqB,IAAI,CAAE,EAA3B,CAA+B,GAAG,CAAC,aAAnC,EADF,cAEE,aAAM,KAAK,CAAE,CAAEgD,KAAK,CAAC,SAAR,CAAb,sBAFF,GADF,EADF,cAOE,qBAAM7D,eAAe,CAAC8D,WAAtB,EAPF,cAQE,aAAK,SAAS,CAAC,kBAAf,wBACE,KAAC,GAAD,EAAK,KAAK,CAAE9D,eAAe,CAAC6D,KAA5B,CAAmC,IAAI,CAAE7D,eAAe,CAAC+D,IAAzD,EADF,cAEE,aAAK,SAAS,CAAC,UAAf,wBACE,qCADF,cAEE,KAAC,OAAD,EAAS,OAAO,CAAE/D,eAAe,CAACgE,QAAlC,uBACE,KAAC,OAAD,EAAS,IAAI,CAAEhE,eAAe,CAACgE,QAA/B,EADF,EAFF,GAFF,GARF,GADF,CAmBG5D,UAAU,eACX,aAAK,SAAS,CAAC,SAAf,wBACE,KAAC,MAAD,EAAQ,IAAI,CAAEA,UAAU,CAAC0B,OAAzB,CAAkC,KAAK,CAAC,WAAxC,uBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,aAAK,SAAS,CAAC,YAAf,WAA6BxB,MAA7B,OADF,cAEE,YAAK,SAAS,CAAC,UAAf,uBACE,YACE,SAAS,CAAC,oBADZ,CAEE,KAAK,CAAE,CAAE2D,KAAK,WAAK3D,MAAL,KAAP,CAFT,EADF,EAFF,GADF,EADF,cAYE,KAAC,MAAD,EAAQ,IAAI,CAAEF,UAAU,CAACyB,SAAzB,CAAoC,KAAK,CAAC,eAA1C,uBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,aAAK,SAAS,CAAC,YAAf,WAA6BrB,QAA7B,OADF,cAEE,YAAK,SAAS,CAAC,UAAf,uBACE,YACE,SAAS,CAAC,oBADZ,CAEE,KAAK,CAAE,CAAEyD,KAAK,WAAKzD,QAAL,KAAP,CAFT,EADF,EAFF,GADF,EAZF,GApBF,cA6CE,aAAK,SAAS,CAAC,UAAf,wBACE,KAAC,KAAD,EACE,KAAK,CAAE,CAAEyD,KAAK,CAAE,KAAT,CADT,CAEE,SAAS,CAAC,YAFZ,CAGE,aAAa,CAAC,SAHhB,CAIE,IAAI,CAAEvD,KAJR,CAKE,MAAM,CAAE,cACN,iCADM,cAEN,8BAFM,CALV,CASE,QAAQ,CAAE,CATZ,EADF,cAaE,KAAC,IAAD,EACE,UAAU,CAAEV,eAAe,CAAC+D,IAAhB,GAAyB,SADvC,CAEE,KAAK,CAAE,CACLE,KAAK,CAAE,KADF,CAELC,MAAM,CAAE,OAFH,CAGLC,MAAM,CAAE,+BAHH,CAFT,CAOE,YAAY,CAAE,CACZC,SAAS,CAAExD,GADC,CAEZyD,WAAW,CAAE,cAFD,CAGZN,IAAI,CAAE,MAHM,CAIZO,KAAK,CAAE,WAJK,CAPhB,CAaE,IAAI,CAAE,CACJ,CACEC,UAAU,CAAE,MADd,CAEE1B,IAAI,CAAE,WAFR,CAGEN,OAAO,CAAE,CAAC,KAAD,CAAQ,SAAR,CAHX,CAIEO,IAAI,CAAE,QAJR,CAKE0B,UAAU,CAAE,CACVC,QAAQ,CAAE,IADA,CALd,CADI,CAYN;AAzBF,CA0BE,QAAQ,CAAE,kBAACvC,CAAD,CAAO,CACf,GAAGA,CAAC,CAACyB,IAAF,CAAO,CAAP,EAAUe,WAAV,CAAsB,CAAtB,IAA6B,KAAhC,CAAsC,CACpCrC,QAAQ,CAAC,IAAD,CAAR,CACAiB,OAAO,CAACC,GAAR,CAAY,MAAZ,EACD,CAHD,IAGO,CACLlB,QAAQ,CAAC,KAAD,CAAR,CACAiB,OAAO,CAACC,GAAR,CAAY,WAAZ,EACD,CACD1C,MAAM,CAAC,IAAD,CAAN,CACD,CAnCH,CAoCE,KAAK,CAAC,WApCR,EAbF,GA7CF,GADF,cAmGC,YAAK,SAAS,CAAC,QAAf,EAnGD,GADF,CAuGD,CAvMD,CAyMA,cAAed,CAAAA,QAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./pages.css\";\r\nimport { Widget, Blockie, Icon, Tooltip, Tag, Table, Form } from \"web3uikit\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useLocation } from \"react-router\";\r\nimport { useMoralis, useWeb3ExecuteFunction } from \"react-moralis\";\r\n\r\n// eslint-disable-next-line\r\nimport { Affix } from \"antd\";\r\n\r\nconst Proposal = () => {\r\n\r\n  const { state: proposalDetails } = useLocation();\r\n  const { Moralis, isInitialized } = useMoralis();\r\n  const [ latestVote, setLatestVote ] = useState();\r\n  const [ percUp, setPercUp ] = useState(0);\r\n  const [ percDown, setPercDown ] = useState(0);\r\n  const [ votes, setVotes ] = useState([]);\r\n  const [ sub, setSub ] = useState(false);\r\n  const contractProcessor = useWeb3ExecuteFunction();\r\n\r\n  useEffect(() => {\r\n    if(isInitialized) {\r\n      async function getVotes(){\r\n\r\n        const Votes = Moralis.Object.extend(\"Votes\");\r\n        const query = new Moralis.Query(Votes);\r\n        query.equalTo(\"proposal\", proposalDetails.id);\r\n        query.descending(\"createdAt\");\r\n        const results = await query.find();\r\n        if(results.length > 0){\r\n          setLatestVote(results[0].attributes);\r\n          setPercDown(\r\n            (\r\n              ((Number(results[0].attributes.votesDown)/(Number(results[0].attributes.votesDown)+Number(results[0].attributes.votesUp)))*100).toFixed(0)\r\n              \r\n            )\r\n          );\r\n          setPercUp(\r\n            (\r\n              ((Number(results[0].attributes.votesUp)/(Number(results[0].attributes.votesDown)+Number(results[0].attributes.votesUp)))*100).toFixed(0)\r\n              \r\n            )\r\n          );\r\n        }\r\n        const votesDirection = results.map((e) => [\r\n          e.attributes.voter,\r\n          <Icon \r\n            fill={e.attributes.votedFor ? \"#2cc40a\" : \"#d93d3d\"}\r\n            size={24}\r\n            svg={e.attributes.votedFor ? \"checkmark\" : \"arrowCircleDown\"}\r\n          />,\r\n        ]);\r\n\r\n        setVotes(votesDirection);\r\n\r\n      }\r\n      getVotes();\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [isInitialized]);\r\n\r\n  async function castVote(upDown) {\r\n    let options = {\r\n      contractAddress: \"0xAEEAfcA812D0f122006da84E2ADDFa17c1A1f035\",\r\n      functionName: \"voteOnProposal\",\r\n      abi: [\r\n        {\r\n          input: [\r\n            {\r\n              internalType: \"uint256\",\r\n              name: \"_id\",\r\n              type: \"uint256\",\r\n            },\r\n            {\r\n              internalType: \"bool\",\r\n              name: \"_vote\",\r\n              type: \"bool\",\r\n            },\r\n          \r\n          ],\r\n          name: \"voteOnProposal\",\r\n          outputs: [],\r\n          stateMutability: \"nonpayable\",\r\n          type:\"function\",\r\n        },\r\n      ],\r\n      params: {\r\n        _id: proposalDetails.id,\r\n        _vote: upDown,\r\n      },\r\n    };\r\n\r\n    await contractProcessor.fetch({\r\n      params: options, \r\n      onSuccess:() => {\r\n        console.log(\"Vote Cast Succesfully\");\r\n        setSub(false);\r\n      },\r\n      onError: (error) => {\r\n        alert(error.data.message);\r\n        setSub(false);\r\n      },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"contentProposal\">\r\n        <div className=\"proposal\">\r\n          <Link to=\"/\">\r\n            <div className=\"backHome\" > \r\n              <Icon fill=\"#e91e63\" size={20} svg=\"chevronLeft\" />\r\n              <span style={{ color:'#e91e63' }}>Overview</span>\r\n            </div>\r\n          </Link>\r\n          <div>{proposalDetails.description}</div>\r\n          <div className=\"proposalOverview\">\r\n            <Tag color={proposalDetails.color} text={proposalDetails.text} />\r\n            <div className=\"proposer\">\r\n              <span>Proposed By</span>\r\n              <Tooltip content={proposalDetails.proposer} >\r\n                <Blockie seed={proposalDetails.proposer} />\r\n              </Tooltip>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {latestVote && (\r\n        <div className=\"widgets\">\r\n          <Widget info={latestVote.votesUp} title=\"Votes For\">\r\n            <div className=\"extraWidgetInfo\">\r\n              <div className=\"extraTItle\">{percUp}%</div>\r\n              <div className=\"progress\">\r\n                <div \r\n                  className=\"progressPercentage\"\r\n                  style={{ width: `${percUp}%` }}\r\n                ></div>\r\n              </div>\r\n            </div>\r\n          </Widget>\r\n          <Widget info={latestVote.votesDown} title=\"Votes Against\">\r\n            <div className=\"extraWidgetInfo\">\r\n              <div className=\"extraTItle\">{percDown}%</div>\r\n              <div className=\"progress\">\r\n                <div\r\n                  className=\"progressPercentage\"\r\n                  style={{ width: `${percDown}%`}}\r\n                ></div>\r\n              </div>\r\n            </div>\r\n          </Widget>\r\n        </div>\r\n        )} \r\n        <div className=\"votesDiv\">\r\n          <Table \r\n            style={{ width: \"60%\" }}\r\n            className=\"votingPage\"\r\n            columnsConfig=\"70% 30%\"\r\n            data={votes}\r\n            header={[\r\n              <span>Address</span>, \r\n              <span>Vote</span>\r\n            ]}\r\n            pageSize={5}\r\n          />\r\n\r\n          <Form \r\n            isDisabled={proposalDetails.text !== \"Ongoing\"}\r\n            style={{\r\n              width: \"30%\",\r\n              height: \"250px\",\r\n              border: \"1px solid rgba(6,158,252,0.2)\",\r\n            }}\r\n            buttonConfig={{\r\n              isLoading: sub, \r\n              loadingText: \"Casting Vote\",\r\n              text: \"Vote\",\r\n              theme: \"secondary\",\r\n            }}\r\n            data={[\r\n              {\r\n                inputWidth: \"100%\",\r\n                name: \"Cast Vote\",\r\n                options: [\"For\", \"Against\"],\r\n                type: \"radios\",\r\n                validation: {\r\n                  required: true,\r\n                },\r\n              },\r\n            ]}\r\n\r\n            //the voting problem is here //solved* inputResults -> inputResult\r\n            onSubmit={(e) => {\r\n              if(e.data[0].inputResult[0] === \"For\"){\r\n                castVote(true);\r\n                console.log(\"pass\")\r\n              } else {\r\n                castVote(false);\r\n                console.log(\"not passs\")\r\n              }\r\n              setSub(true);\r\n            }}\r\n            Title=\"Cast Vote\"\r\n          />\r\n        </div>\r\n     </div>\r\n     <div className=\"voting\"></div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Proposal;\r\n"]},"metadata":{},"sourceType":"module"}